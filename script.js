/**
 * PersonaQuest - MBTI‰∫∫Ê†ºÊµãËØÑÁΩëÁ´ô
 * ÁâàÊú¨: 3.0 Complete
 * ‰ΩúËÄÖ: AI Assistant
 * ÂàõÂª∫Êó•Êúü: 2024Âπ¥
 * 
 * ÂäüËÉΩÁâπÊÄß:
 * - ÂÆåÊï¥ÁöÑ16ÁßçMBTI‰∫∫Ê†ºÁ±ªÂûã
 * - 20ÈÅìÁ≤æÂøÉËÆæËÆ°ÁöÑÊµãËØïÈ¢òÁõÆ
 * - Ê≤âÊµ∏ÂºèÁî®Êà∑‰ΩìÈ™å
 * - Êú¨Âú∞Êï∞ÊçÆÊåÅ‰πÖÂåñ
 * - ÂìçÂ∫îÂºèËÆæËÆ°
 * - ÂÆåÂñÑÁöÑÈîôËØØÂ§ÑÁêÜ
 */

'use strict';

// ========== Â∫îÁî®ÈÖçÁΩÆ ==========
const APP_CONFIG = {
    // Âä®ÁîªÈÖçÁΩÆ
    ANIMATION: {
        DURATION: 300,
        SCROLL_THRESHOLD: 100,
        STAGGER_DELAY: 100
    },
    
    // ÊµãËØïÈÖçÁΩÆ
    TEST: {
        QUESTIONS_PER_DIMENSION: 5,
        AUTO_SAVE_INTERVAL: 30000,
        PROGRESS_EXPIRY: 24 * 60 * 60 * 1000 // 24Â∞èÊó∂
    },
    
    // Â≠òÂÇ®ÈîÆÂêç
    STORAGE: {
        PROGRESS: 'personaquest_progress_v3',
        RESULTS: 'personaquest_results_v3',
        SETTINGS: 'personaquest_settings_v3',
        HISTORY: 'personaquest_history_v3'
    },
    
    // UIÈÖçÁΩÆ
    UI: {
        TOAST_DURATION: 3000,
        MODAL_BACKDROP: 'rgba(0, 0, 0, 0.5)',
        BREAKPOINTS: {
            MOBILE: 768,
            TABLET: 1024
        }
    }
};

// ========== Â∫îÁî®Áä∂ÊÄÅÁÆ°ÁêÜ ==========
class AppState {
    constructor() {
        this.currentSection = 'home';
        this.testStarted = false;
        this.testCompleted = false;
        this.currentQuestion = 0;
        this.answers = [];
        this.personalityType = '';
        this.scores = {
            E: 0, I: 0,
            S: 0, N: 0,
            T: 0, F: 0,
            J: 0, P: 0
        };
        this.settings = {
            soundEnabled: true,
            animationsEnabled: true,
            theme: 'light'
        };
        this.history = [];
        this.autoSaveTimer = null;
    }
    
    reset() {
        this.testStarted = false;
        this.testCompleted = false;
        this.currentQuestion = 0;
        this.answers = [];
        this.personalityType = '';
        this.scores = {
            E: 0, I: 0,
            S: 0, N: 0,
            T: 0, F: 0,
            J: 0, P: 0
        };
        this.clearAutoSave();
    }
    
    clearAutoSave() {
        if (this.autoSaveTimer) {
            clearInterval(this.autoSaveTimer);
            this.autoSaveTimer = null;
        }
    }
    
    setAutoSave(callback) {
        this.clearAutoSave();
        this.autoSaveTimer = setInterval(callback, APP_CONFIG.TEST.AUTO_SAVE_INTERVAL);
    }
}

// ========== MBTI‰∫∫Ê†ºÊï∞ÊçÆÂ∫ì ==========
const PERSONALITY_DATABASE = {
    // ÂàÜÊûêÂ∏àÁªÑ (NT)
    analysts: [
        {
            type: 'INTJ',
            name: 'Âª∫Á≠ëÂ∏à',
            emoji: 'üèõÔ∏è',
            description: 'Âª∫Á≠ëÂ∏àÊòØÂØåÊúâÊÉ≥Ë±°ÂäõÂíåÊàòÁï•ÊÄßÁöÑÊÄùÊÉ≥ÂÆ∂Ôºå‰ªñ‰ª¨Êã•Êúâ‰∏ÄÂàá‰∏∫ËßÑÂàíËÄåÁîüÁöÑÁâπË¥®„ÄÇ',
            quote: 'ÊÉ≥Ë±°ÂäõÊØîÁü•ËØÜÊõ¥ÈáçË¶ÅÔºåÂõ†‰∏∫Áü•ËØÜÊòØÊúâÈôêÁöÑ„ÄÇ',
            traits: ['Áã¨Á´ã', 'ÁêÜÊÄß', 'ÊúâËøúËßÅ', 'ÊûúÊñ≠', 'ÂàõÊñ∞', 'ÂÆåÁæé‰∏ª‰πâ'],
            strengths: [
                { icon: 'üéØ', text: 'ÊàòÁï•ÊÄùÁª¥ËÉΩÂäõÂº∫ÔºåÂñÑ‰∫éÂà∂ÂÆöÈïøÊúüËÆ°Âàí' },
                { icon: 'üß†', text: 'Áã¨Á´ãËá™‰∏ªÔºå‰∏ç‰æùËµñ‰ªñ‰∫∫ÊÑèËßÅ' },
                { icon: 'üìö', text: 'Ê±ÇÁü•Ê¨≤Âº∫ÔºåÊ∏¥ÊúõÁêÜËß£ÂíåÂ≠¶‰π†' },
                { icon: 'üîç', text: 'ÂØπÂ§çÊùÇÈóÆÈ¢òÊúâÊ∑±ÂàªÊ¥ûÂØüÂäõ' }
            ],
            challenges: [
                { icon: '‚ùÑÔ∏è', text: 'ÂèØËÉΩÊòæÂæóËøá‰∫éÂÜ∑Êº†ÂíåÁñèËøú' },
                { icon: 'üíî', text: 'ÂØπÊÉÖÊÑüË°®Ëææ‰∏çÂ§üÊïèÊÑü' },
                { icon: '‚è∞', text: 'ÂÆåÁæé‰∏ª‰πâÂÄæÂêëÂèØËÉΩÂØºËá¥ÊãñÂª∂' },
                { icon: 'üë•', text: 'ÂèØËÉΩ‰Ωé‰º∞‰ªñ‰∫∫ÁöÑÊÉÖÊÑüÈúÄÊ±Ç' }
            ],
            careers: ['ËΩØ‰ª∂Êû∂ÊûÑÂ∏à', 'ÁßëÂ≠¶ÂÆ∂', 'ÊàòÁï•È°æÈóÆ', 'Â§ßÂ≠¶ÊïôÊéà', 'ÊäïËµÑÂàÜÊûêÂ∏à'],
            relationships: {
                overview: '‰Ωú‰∏∫INTJÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÈáçËßÜÊô∫ÂäõËøûÊé•ÂíåÂÖ±ÂêåÊàêÈïø„ÄÇ',
                romantic: 'ÈúÄË¶ÅËÉΩÂ§üÁêÜËß£Âπ∂Â∞äÈáç‰Ω†Áã¨Á´ãÊÄßÁöÑ‰º¥‰æ£',
                friendship: 'ÈáçËßÜÊ∑±Â∫¶ÁöÑÊÄùÊÉ≥‰∫§ÊµÅÔºåËÄåÈùûË°®Èù¢Á§æ‰∫§',
                family: 'ÂèØËÉΩÈúÄË¶ÅÊõ¥Â§öÂä™ÂäõË°®ËææÊÉÖÊÑü',
                advice: 'Â∞ùËØïÊõ¥Â§öÂú∞Ë°®ËææÊÉÖÊÑüÔºåÁêÜËß£‰º¥‰æ£ÁöÑÊÉÖÊÑüÈúÄÊ±ÇÔºåËÄå‰∏ç‰ªÖ‰ªÖÊòØÈÄªËæëÂ±ÇÈù¢„ÄÇ'
            },
            growth: [
                { step: 1, title: 'ÊÉÖÊÑüËßâÂØü', desc: 'ÁªÉ‰π†ËØÜÂà´ÂíåË°®ËææËá™Â∑±ÁöÑÊÉÖÊÑü' },
                { step: 2, title: 'ÂêåÁêÜÂøÉÂüπÂÖª', desc: '‰∏ªÂä®ÁêÜËß£‰ªñ‰∫∫ÁöÑÊÑüÂèóÂíåÈúÄÊ±Ç' },
                { step: 3, title: 'Âπ≥Ë°°ÂÆåÁæé', desc: 'Â≠¶‰ºöÊé•Âèó"Ë∂≥Â§üÂ•Ω"ËÄåÈùûËøΩÊ±ÇÂÆåÁæé' }
            ]
        },
        {
            type: 'INTP',
            name: 'ÈÄªËæëÂ≠¶ÂÆ∂',
            emoji: 'üîç',
            description: 'ÈÄªËæëÂ≠¶ÂÆ∂ÊòØÂÖ∑ÊúâÂàõÊñ∞Á≤æÁ•ûÁöÑÂèëÊòéÂÆ∂Ôºå‰ªñ‰ª¨ÂØπÁü•ËØÜÊúâÁùÄÊ≠¢‰∏ç‰ΩèÁöÑÊ∏¥Êúõ„ÄÇ',
            quote: 'ÈÄªËæëÊòØÈÄöÂæÄÁúüÁêÜÁöÑË∑ØÂæÑ„ÄÇ',
            traits: ['ÈÄªËæëÊÄßÂº∫', 'Â•ΩÂ•á', 'Áã¨Á´ã', 'ÁÅµÊ¥ª', 'ÂàõÊñ∞', 'ÁêÜÊÄß'],
            strengths: [
                { icon: '‚öôÔ∏è', text: 'Âá∫Ëâ≤ÁöÑÈÄªËæëÂàÜÊûêËÉΩÂäõ' },
                { icon: 'üåà', text: 'ÊÄùÁª¥ÂºÄÊîæÔºå‰πê‰∫éÊé•ÂèóÊñ∞ËßÇÁÇπ' },
                { icon: 'üí°', text: 'ÂØåÊúâÂàõÈÄ†ÂäõÂíåÊÉ≥Ë±°Âäõ' },
                { icon: '‚öñÔ∏è', text: 'ÂÆ¢ËßÇÂÖ¨Ê≠£Ôºå‰∏çÊòìÂèóÂÅèËßÅÂΩ±Âìç' }
            ],
            challenges: [
                { icon: 'üå´Ô∏è', text: 'ÂèØËÉΩÊòæÂæóÂøÉ‰∏çÂú®ÁÑâ' },
                { icon: 'üìù', text: 'ÂØπÊó•Â∏∏‰∫ãÂä°Áº∫‰πèËÄêÂøÉ' },
                { icon: 'üó£Ô∏è', text: 'Á§æ‰∫§ÊäÄËÉΩÂèØËÉΩ‰∏çË∂≥' },
                { icon: 'üîÑ', text: 'ÂèØËÉΩËøáÂ∫¶ÂàÜÊûêËÄåÈô∑ÂÖ•Áò´Áó™' }
            ],
            careers: ['Á†îÁ©∂Âëò', 'Á®ãÂ∫èÂëò', 'Âì≤Â≠¶ÂÆ∂', 'Êï∞Â≠¶ÂÆ∂', 'ÊäÄÊúØÊñáÊ°£Êí∞ÂÜô‰∫∫'],
            relationships: {
                overview: '‰Ωú‰∏∫INTPÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÊô∫Âäõ‰∏äÁöÑÂà∫ÊøÄÂíåÊÄùÊÉ≥ÁöÑ‰∫§ÊµÅ„ÄÇ',
                romantic: 'ÈúÄË¶ÅËÉΩÂ§üËøõË°åÊ∑±Â∫¶ÂØπËØùÁöÑ‰º¥‰æ£',
                friendship: 'ÈáçËßÜÊô∫Âäõ‰∏äÁöÑËøûÊé•ÂíåÂÖ±ÂêåÂÖ¥Ë∂£',
                family: 'ÂèØËÉΩÈúÄË¶ÅÊõ¥Â§öÂÆûÈôÖÁöÑÊÉÖÊÑüÊîØÊåÅ',
                advice: 'Âä™ÂäõÂÖ≥Ê≥®‰º¥‰æ£ÁöÑÊÉÖÊÑüÈúÄÊ±ÇÔºåÂ≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÊÑüÂèóÔºåËÄå‰∏ç‰ªÖ‰ªÖÊòØÊÉ≥Ê≥ï„ÄÇ'
            },
            growth: [
                { step: 1, title: 'Ë°åÂä®Âäõ', desc: 'Â∞ÜÊÉ≥Ê≥ïËΩ¨Âåñ‰∏∫ÂÆûÈôÖË°åÂä®' },
                { step: 2, title: 'ÊÉÖÊÑüË°®Ëææ', desc: 'ÁªÉ‰π†Ë°®ËææÊÑüÂèóËÄåÈùû‰ªÖÂàÜÊûê' },
                { step: 3, title: '‰∏ìÊ≥®ÂΩì‰∏ã', desc: 'ÂáèÂ∞ëËøáÂ∫¶ÊÄùËÄÉÔºå‰∫´ÂèóÂΩì‰∏ã' }
            ]
        },
        {
            type: 'ENTJ',
            name: 'ÊåáÊå•ÂÆò',
            emoji: 'üëë',
            description: 'ÊåáÊå•ÂÆòÊòØÂ§ßËÉÜ„ÄÅÂØåÊúâÊÉ≥Ë±°ÂäõÂíåÊÑèÂøóÂº∫Â§ßÁöÑÈ¢ÜÂØºËÄÖÔºå‰ªñ‰ª¨ÊÄªËÉΩÊâæÂà∞ÊàñÂàõÈÄ†Ëß£ÂÜ≥ÊñπÊ≥ï„ÄÇ',
            quote: 'È¢ÜÂØºÂäõ‰∏çÊòØÂÖ≥‰∫éÂ§¥Ë°îÔºåËÄåÊòØÂÖ≥‰∫éÂΩ±ÂìçÂäõ„ÄÇ',
            traits: ['È¢ÜÂØºÂäõÂº∫', 'Ëá™‰ø°', 'ÊàòÁï•ÊÄùÁª¥', 'ÊûúÊñ≠', 'È≠ÖÂäõ', 'ÁõÆÊ†áÂØºÂêë'],
            strengths: [
                { icon: 'üöÄ', text: 'Â§©ÁîüÁöÑÈ¢ÜÂØºËÄÖÔºåÂñÑ‰∫éÊøÄÂä±‰ªñ‰∫∫' },
                { icon: 'üéØ', text: 'Ëá™‰ø°ÊûúÊñ≠ÔºåÂÜ≥Á≠ñËÉΩÂäõÂº∫' },
                { icon: 'üó∫Ô∏è', text: 'ÈïøËøúËßÑÂàíËÉΩÂäõÂá∫Ëâ≤' },
                { icon: '‚ö°', text: 'ÂØπÊåëÊàòÂÖÖÊª°ÁÉ≠ÊÉÖ' }
            ],
            challenges: [
                { icon: 'üí™', text: 'ÂèØËÉΩÊòæÂæóËøá‰∫éÂº∫Âäø' },
                { icon: '‚ù§Ô∏è', text: 'ÂØπ‰ªñ‰∫∫ÊÉÖÊÑü‰∏çÂ§üÊïèÊÑü' },
                { icon: '‚è≥', text: 'ÂèØËÉΩÁº∫‰πèËÄêÂøÉ' },
                { icon: 'üîç', text: 'ÊúâÊó∂‰ºöÂøΩËßÜÁªÜËäÇ' }
            ],
            careers: ['CEO', 'ÁÆ°ÁêÜÈ°æÈóÆ', 'ÂæãÂ∏à', 'ÊîøÊ≤ªÂÆ∂', 'Âàõ‰∏öËÄÖ'],
            relationships: {
                overview: '‰Ωú‰∏∫ENTJÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÊàêÈïøÂíåÂÖ±ÂêåÁõÆÊ†áÔºåÂñúÊ¨¢Â∏¶È¢Ü‰º¥‰æ£‰∏ÄËµ∑ÂâçËøõ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÊîØÊåÅ‰Ω†ÈõÑÂøÉÂ£ÆÂøóÁöÑ‰º¥‰æ£',
                friendship: 'Ëá™ÁÑ∂Êàê‰∏∫Áæ§‰ΩìÁöÑÈ¢ÜÂØºËÄÖ',
                family: 'ÂèØËÉΩÈúÄË¶ÅÊîæÊÖ¢ËÑöÊ≠•ÔºåÂÄæÂê¨ÂÆ∂‰∫∫',
                advice: 'Â≠¶‰ºöÂÄæÂê¨Âπ∂Â∞äÈáç‰º¥‰æ£ÁöÑÊÑèËßÅÔºå‰∏çË¶ÅÊÄªÊòØËØïÂõæ‰∏ªÂØºÂÖ≥Á≥ª„ÄÇ'
            },
            growth: [
                { step: 1, title: 'ËÄêÂøÉÂüπÂÖª', desc: 'Â≠¶‰ºöÁ≠âÂæÖÂíåÁªô‰∫à‰ªñ‰∫∫Êó∂Èó¥' },
                { step: 2, title: 'ÊÉÖÊÑüÊô∫ÊÖß', desc: 'ÂèëÂ±ïÊÉÖÂïÜÔºåÁêÜËß£‰ªñ‰∫∫ÊÑüÂèó' },
                { step: 3, title: 'ÊéàÊùÉËâ∫ÊúØ', desc: 'Â≠¶‰ºö‰ø°‰ªªÂπ∂ÊéàÊùÉÁªô‰ªñ‰∫∫' }
            ]
        },
        {
            type: 'ENTP',
            name: 'Ëæ©ËÆ∫ÂÆ∂',
            emoji: 'üí¨',
            description: 'Ëæ©ËÆ∫ÂÆ∂ÊòØËÅ™ÊòéÂ•ΩÂ•áÁöÑÊÄùÊÉ≥ÂÆ∂Ôºå‰ªñ‰ª¨‰∏ç‰ºöÊîæÂºÉÊô∫Âäõ‰∏äÁöÑÊåëÊàò„ÄÇ',
            quote: 'Ëæ©ËÆ∫‰∏çÊòØ‰∏∫‰∫ÜËµ¢ÔºåËÄåÊòØ‰∏∫‰∫ÜÊé•ËøëÁúüÁêÜ„ÄÇ',
            traits: ['Êú∫Êô∫', 'ÂàõÊñ∞', 'ÈÄÇÂ∫îÊÄßÂº∫', 'ÂñÑ‰∫éËæ©ËÆ∫', 'ÁÉ≠ÊÉÖ', 'ÊÄùÁª¥ÊïèÊç∑'],
            strengths: [
                { icon: 'üé≠', text: 'ÊÄùÁª¥ÊïèÊç∑ÔºåÂñÑ‰∫éÂç≥ÂÖ¥ÂèëÊå•' },
                { icon: 'üåç', text: 'Áü•ËØÜÈù¢ÂπøÔºåÂÖ¥Ë∂£Â§öÊ†∑' },
                { icon: 'üé§', text: 'Âá∫Ëâ≤ÁöÑËæ©ËÆ∫ÂíåËØ¥ÊúçËÉΩÂäõ' },
                { icon: 'üî•', text: 'ÂØπÊåëÊàòÂÖÖÊª°ÁÉ≠ÊÉÖ' }
            ],
            challenges: [
                { icon: '‚öîÔ∏è', text: 'ÂèØËÉΩÊòæÂæó‰∫âÂº∫Â•ΩËÉú' },
                { icon: 'üéØ', text: 'ÂèØËÉΩÂØπÂ∏∏ËßÑ‰ªªÂä°ÊÑüÂà∞ÂéåÁÉ¶' },
                { icon: 'ü§ù', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÊâøËØ∫' },
                { icon: 'üîç', text: 'ÂèØËÉΩÂøΩËßÜÁªÜËäÇÂíåÂÆûÈôÖÊâßË°å' }
            ],
            careers: ['ÂàõÊÑèÊÄªÁõë', 'ÂæãÂ∏à', 'ËÆ∞ËÄÖ', 'Â∏ÇÂú∫Ëê•ÈîÄ', '‰ºÅ‰∏öÂÆ∂'],
            relationships: {
                overview: '‰Ωú‰∏∫ENTPÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÊô∫Âäõ‰∏äÁöÑÂà∫ÊøÄÂíåÊñ∞Â•áÊÑü„ÄÇ',
                romantic: 'ÈúÄË¶ÅËÉΩÂ§üË∑ü‰∏ä‰Ω†ÊÄùÁª¥ËäÇÂ•èÁöÑ‰º¥‰æ£',
                friendship: 'ÂñúÊ¨¢Ëæ©ËÆ∫ÂíåÊÄùÊÉ≥‰∫§ÊµÅÁöÑÊúãÂèã',
                family: 'ÂèØËÉΩÈúÄË¶ÅÊõ¥Â§öÁ®≥ÂÆöÊÄßÂíåÊâøËØ∫',
                advice: 'Â≠¶‰ºö‰∏ìÊ≥®‰∫éÂΩìÂâçÂÖ≥Á≥ªÔºåÈÅøÂÖçÊÄªÊòØÂØªÊâæ‰∏ã‰∏Ä‰∏™Êô∫ÂäõÊåëÊàò„ÄÇ'
            },
            growth: [
                { step: 1, title: 'ÊâøËØ∫ÂÆûË∑µ', desc: 'Â≠¶‰ºöÂùöÊåÅÂÆåÊàêÂ∑≤ÂºÄÂßãÁöÑ‰∫ãÊÉÖ' },
                { step: 2, title: 'Ê∑±Â∫¶ËøûÊé•', desc: 'ÂüπÂÖªÊ∑±ÂÖ•ËÄåÈùûËÇ§ÊµÖÁöÑÂÖ≥Á≥ª' },
                { step: 3, title: 'ÊâßË°åËÉΩÂäõ', desc: 'Â∞ÜÂàõÊÑèËΩ¨Âåñ‰∏∫ÂÖ∑‰ΩìÊàêÊûú' }
            ]
        }
    ],
    
    // Â§ñ‰∫§ÂÆ∂ÁªÑ (NF)
    diplomats: [
        {
            type: 'INFJ',
            name: 'ÊèêÂÄ°ËÄÖ',
            emoji: 'üåü',
            description: 'ÊèêÂÄ°ËÄÖÊòØÂÆâÈùôËÄåÁ•ûÁßòÔºåÂêåÊó∂ÈºìËàû‰∫∫ÂøÉ‰∏î‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÁêÜÊÉ≥‰∏ª‰πâËÄÖ„ÄÇ',
            quote: 'Êàê‰∏∫‰Ω†ÊÉ≥Âú®‰∏ñÁïå‰∏äÁúãÂà∞ÁöÑÊîπÂèò„ÄÇ',
            traits: ['ÁêÜÊÉ≥‰∏ª‰πâ', 'ÊúâÊ¥ûÂØüÂäõ', 'ÊúâÂéüÂàô', 'ÊúâÂêåÊÉÖÂøÉ', 'Áõ¥ËßâÂº∫', 'Ê∑±Ê≤â'],
            strengths: [
                { icon: 'üîÆ', text: 'Ê∑±ÂàªÁöÑÊ¥ûÂØüÂäõÂíåÁõ¥Ëßâ' },
                { icon: 'üíù', text: 'ÂØåÊúâÂêåÊÉÖÂøÉÂíåÂêåÁêÜÂøÉ' },
                { icon: 'üìú', text: 'ÂùöÂÆöÁöÑ‰ª∑ÂÄºËßÇÂíåÂéüÂàô' },
                { icon: 'üå±', text: 'Ëá¥Âäõ‰∫éÂ∏ÆÂä©‰ªñ‰∫∫ÊàêÈïø' }
            ],
            challenges: [
                { icon: 'üåä', text: 'ÂèØËÉΩËøá‰∫éÊïèÊÑü' },
                { icon: '‚òÅÔ∏è', text: 'ÂèØËÉΩËøáÂ∫¶ÁêÜÊÉ≥Âåñ' },
                { icon: 'üó°Ô∏è', text: 'ÂèØËÉΩÈöæ‰ª•Êé•ÂèóÊâπËØÑ' },
                { icon: 'üîã', text: 'ÂèØËÉΩÂÆπÊòìÊÑüÂà∞ÂÄ¶ÊÄ†' }
            ],
            careers: ['ÂøÉÁêÜÂí®ËØ¢Â∏à', '‰ΩúÂÆ∂', 'Á§æ‰ºöÂ∑•‰ΩúËÄÖ', 'ÊïôÂ∏à', 'ÈùûËê•Âà©ÁªÑÁªáÂ∑•‰ΩúËÄÖ'],
            relationships: {
                overview: '‰Ωú‰∏∫INFJÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÊ∑±Â∫¶ÁöÑÊÉÖÊÑüËøûÊé•ÂíåÂÖ±Âêå‰ª∑ÂÄºËßÇ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÊ∑±ÂàªÁêÜËß£ÂíåÊÉÖÊÑüÊîØÊåÅÁöÑ‰º¥‰æ£',
                friendship: 'ÈáçËßÜÁúüÂÆûÂíåÊ∑±Â∫¶ÁöÑÂèãË∞ä',
                family: 'ÂæÄÂæÄÊòØÂÆ∂Â∫≠ÁöÑÊÉÖÊÑüÊîØÊü±',
                advice: 'Â≠¶‰ºöËÆæÂÆöÁïåÈôêÔºå‰∏çË¶ÅËøáÂ∫¶Áâ∫Áâ≤Ëá™Â∑±ÁöÑÈúÄÊ±Ç„ÄÇ'
            },
            growth: [
                { step: 1, title: 'ÁïåÈôêËÆæÂÆö', desc: 'Â≠¶‰ºöËØ¥"‰∏ç"Âíå‰øùÊä§Ëá™Â∑±' },
                { step: 2, title: 'Áé∞ÂÆûÂπ≥Ë°°', desc: 'Âú®ÁêÜÊÉ≥‰∏éÁé∞ÂÆûÈó¥ÊâæÂà∞Âπ≥Ë°°' },
                { step: 3, title: 'Ëá™ÊàëÂÖ≥ÊÄÄ', desc: '‰ºòÂÖàÁÖßÈ°æËá™Â∑±ÁöÑÊÉÖÊÑüÈúÄÊ±Ç' }
            ]
        },
        {
            type: 'INFP',
            name: 'Ë∞ÉÂÅúËÄÖ',
            emoji: 'üïäÔ∏è',
            description: 'Ë∞ÉÂÅúËÄÖÊòØËØóÊÑè„ÄÅÂñÑËâØÂíåÂà©‰ªñ‰∏ª‰πâÁöÑ‰∫∫ÔºåÊÄªÊòØÁÉ≠ÂàáÂú∞‰∏∫Â∏ÆÂä©Â•ΩÁöÑ‰∫ã‰∏öËÄåÂä™Âäõ„ÄÇ',
            quote: 'Âú®ÊØè‰∏™‰∫∫ÂøÉ‰∏≠ÈÉΩÊúâ‰∏ÄÁâáÂÄºÂæóÊé¢Á¥¢ÁöÑÂÆáÂÆô„ÄÇ',
            traits: ['ÁêÜÊÉ≥‰∏ª‰πâ', 'Âø†ËØö', 'ÈÄÇÂ∫îÊÄß', 'ÊúâÂàõÈÄ†Âäõ', 'ÂíåË∞ê', 'ÁúüËØö'],
            strengths: [
                { icon: 'üé®', text: 'Âº∫ÁÉàÁöÑ‰ª∑ÂÄºËßÇÂíåÈÅìÂæ∑ÊÑü' },
                { icon: '‚ú®', text: 'ÂØåÊúâÂàõÈÄ†ÂäõÂíåÊÉ≥Ë±°Âäõ' },
                { icon: 'üíñ', text: 'Âø†ËØöÂíåÂ•âÁåÆ' },
                { icon: 'üëÇ', text: 'ÂñÑ‰∫éÁêÜËß£‰ªñ‰∫∫' }
            ],
            challenges: [
                { icon: 'üåà', text: 'ÂèØËÉΩËøá‰∫éÁêÜÊÉ≥Âåñ' },
                { icon: 'üíî', text: 'ÂèØËÉΩÂØπÊâπËØÑËøá‰∫éÊïèÊÑü' },
                { icon: '‚öñÔ∏è', text: 'ÂèØËÉΩÈöæ‰ª•Â§ÑÁêÜÂÜ≤Á™Å' },
                { icon: 'üõ†Ô∏è', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÂÆûÈôÖ‰∫ãÂä°' }
            ],
            careers: ['‰ΩúÂÆ∂', 'Ëâ∫ÊúØÂÆ∂', 'ÂøÉÁêÜÂí®ËØ¢Â∏à', 'Á§æ‰ºöÂ∑•‰ΩúËÄÖ', 'ÊïôÂ∏à'],
            relationships: {
                overview: '‰Ωú‰∏∫INFPÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÁúüÂÆûÁöÑÊÉÖÊÑüËøûÊé•ÂíåÂÖ±Âêå‰ª∑ÂÄºËßÇ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÁêÜËß£‰Ω†ÂÜÖÂøÉ‰∏ñÁïåÁöÑ‰º¥‰æ£',
                friendship: 'ÈáçËßÜÁúüÂÆûÂíåÊ∑±Â∫¶ÁöÑËøûÊé•',
                family: 'ËøΩÊ±ÇÂíåË∞êÔºåÈÅøÂÖçÂÜ≤Á™Å',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÈúÄÊ±ÇÂíåÊÑüÂèóÔºå‰∏çË¶ÅÊÄªÊòØÁâ∫Áâ≤Ëá™Â∑±„ÄÇ'
            },
            growth: [
                { step: 1, title: 'Ëá™‰ø°Âª∫Á´ã', desc: 'Áõ∏‰ø°Ëá™Â∑±ÁöÑ‰ª∑ÂÄºÂíåËÉΩÂäõ' },
                { step: 2, title: 'ÂÜ≤Á™ÅÈù¢ÂØπ', desc: 'Â≠¶‰ºöÂª∫ËÆæÊÄßÂú∞Â§ÑÁêÜÂàÜÊ≠ß' },
                { step: 3, title: 'Ë°åÂä®ÂØºÂêë', desc: 'Â∞ÜÁêÜÊÉ≥ËΩ¨Âåñ‰∏∫ÂÖ∑‰ΩìË°åÂä®' }
            ]
        },
        {
            type: 'ENFJ',
            name: '‰∏ª‰∫∫ÂÖ¨',
            emoji: 'üåà',
            description: '‰∏ª‰∫∫ÂÖ¨ÊòØÂØåÊúâÈ≠ÖÂäõÂíåÈºìËàû‰∫∫ÂøÉÁöÑÈ¢ÜÂØºËÄÖÔºåÊúâ‰ΩøÂê¨‰ºóÂê¨‰ªé‰ªñ‰ª¨ÊÉ≥Ê≥ïÁöÑÂ§©Ëµã„ÄÇ',
            quote: 'È¢ÜÂØº‰ªñ‰∫∫ÊúÄÂ•ΩÁöÑÊñπÂºèÊòØÊúçÂä°‰ªñ‰∫∫„ÄÇ',
            traits: ['ÊúâÈ≠ÖÂäõ', 'Âà©‰ªñ‰∏ª‰πâ', 'ÂèØÈù†', 'Â§©ÁîüÁöÑÈ¢ÜÂØºËÄÖ', 'ÁÉ≠ÊÉÖ', 'ÂêåÁêÜÂøÉÂº∫'],
            strengths: [
                { icon: 'üé≠', text: 'Â§©ÁîüÁöÑÈ¢ÜÂØºËÄÖÂíåÊøÄÂä±ËÄÖ' },
                { icon: '‚ù§Ô∏è', text: 'Âº∫ÁÉàÁöÑÂêåÁêÜÂøÉ' },
                { icon: 'üó£Ô∏è', text: 'ÂñÑ‰∫éÊ≤üÈÄöÂíåË°®Ëææ' },
                { icon: 'üåü', text: 'Ëá¥Âäõ‰∫éÂ∏ÆÂä©‰ªñ‰∫∫ÊàêÈïø' }
            ],
            challenges: [
                { icon: 'üë•', text: 'ÂèØËÉΩËøá‰∫éÁêÜÊÉ≥Âåñ‰ªñ‰∫∫' },
                { icon: 'üôè', text: 'ÂèØËÉΩÂøΩËßÜËá™Â∑±ÁöÑÈúÄÊ±Ç' },
                { icon: 'üéØ', text: 'ÂèØËÉΩÂØπÊâπËØÑËøá‰∫éÊïèÊÑü' },
                { icon: '‚öñÔ∏è', text: 'ÂèØËÉΩËøáÂ∫¶ÊâøÊãÖË¥£‰ªª' }
            ],
            careers: ['ÊïôÂ∏à', 'Âí®ËØ¢Â∏à', '‰∫∫ÂäõËµÑÊ∫ê', 'ÂÖ¨ÂÖ≥‰∏ìÂëò', 'ÈùûËê•Âà©ÁªÑÁªáÈ¢ÜÂØºËÄÖ'],
            relationships: {
                overview: '‰Ωú‰∏∫ENFJÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÂíåË∞ê‰∏éÂÖ±ÂêåÊàêÈïøÔºåÂñúÊ¨¢Â∏ÆÂä©‰º¥‰æ£ÂÆûÁé∞ÊΩúÂäõ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÊ¨£Ëµè‰Ω†‰ªòÂá∫Âπ∂Áªô‰∫àÊîØÊåÅÁöÑ‰º¥‰æ£',
                friendship: 'ÊòØÊúãÂèã‰∏≠ÁöÑÁ≤æÁ•ûÈ¢ÜË¢ñ',
                family: 'Â∏∏Â∏∏ÁÖßÈ°æÊØè‰∏™‰∫∫ÁöÑÈúÄÊ±Ç',
                advice: 'Â≠¶‰ºöÂÖ≥Ê≥®Ëá™Â∑±ÁöÑÈúÄÊ±ÇÔºå‰∏çË¶ÅÊÄªÊòØÊää‰ªñ‰∫∫ÊîæÂú®Á¨¨‰∏Ä‰Ωç„ÄÇ'
            },
            growth: [
                { step: 1, title: 'Ëá™Êàë‰ºòÂÖà', desc: 'Â≠¶‰ºöÂÖàÁÖßÈ°æËá™Â∑±ÂÜçÂ∏ÆÂä©‰ªñ‰∫∫' },
                { step: 2, title: 'Áé∞ÂÆûÊé•Á∫≥', desc: 'Êé•Âèó‰ªñ‰∫∫ÁöÑ‰∏çÂÆåÁæé' },
                { step: 3, title: 'ÁïåÈôêÁª¥Êä§', desc: 'ËÆæÂÆöÂÅ•Â∫∑ÁöÑ‰∏™‰∫∫ÁïåÈôê' }
            ]
        },
        {
            type: 'ENFP',
            name: 'Á´ûÈÄâËÄÖ',
            emoji: 'üé≠',
            description: 'Á´ûÈÄâËÄÖÊòØÁÉ≠ÊÉÖ„ÄÅÊúâÂàõÈÄ†ÂäõÂíåÁ§æ‰∫§ËÉΩÂäõÂº∫ÁöÑ‰∫∫Ôºå‰ªñ‰ª¨ÊÄªÊòØËá™Áî±Âú∞ÂØªÊâæÁîüÊ¥ª‰∏≠ÁöÑÁúüÂñÑÁæé„ÄÇ',
            quote: 'ÁîüÊ¥ª‰∏çÊòØÂØªÊâæËá™Â∑±ÔºåËÄåÊòØÂàõÈÄ†Ëá™Â∑±„ÄÇ',
            traits: ['ÁÉ≠ÊÉÖ', 'ÊúâÂàõÈÄ†Âäõ', 'Á§æ‰∫§ËÉΩÂäõÂº∫', 'Á≤æÁ•ûËá™Áî±', '‰πêËßÇ', 'ÁÅµÊÑü‰∏∞ÂØå'],
            strengths: [
                { icon: 'üî•', text: 'ÁÉ≠ÊÉÖÂíåÊ¥ªÂäõ' },
                { icon: 'üë•', text: 'Âá∫Ëâ≤ÁöÑÁ§æ‰∫§ÊäÄËÉΩ' },
                { icon: 'üí°', text: 'ÂØåÊúâÂàõÈÄ†ÂäõÂíåÊÉ≥Ë±°Âäõ' },
                { icon: 'üåà', text: 'ÂñÑ‰∫éÊøÄÂä±‰ªñ‰∫∫' }
            ],
            challenges: [
                { icon: 'üéØ', text: 'ÂèØËÉΩÁº∫‰πè‰∏ìÊ≥®Âäõ' },
                { icon: 'üìÖ', text: 'ÂèØËÉΩÂØπÂ∏∏ËßÑ‰ªªÂä°ÊÑüÂà∞ÂéåÁÉ¶' },
                { icon: 'ü§ù', text: 'ÂèØËÉΩËøáÂ∫¶ÊâøËØ∫' },
                { icon: 'üíî', text: 'ÂèØËÉΩÂØπÊâπËØÑËøá‰∫éÊïèÊÑü' }
            ],
            careers: ['Â∏ÇÂú∫Ëê•ÈîÄ', 'ÂÖ¨ÂÖ≥‰∏ìÂëò', 'ÂøÉÁêÜÂí®ËØ¢Â∏à', 'ÊïôÂ∏à', 'Ëâ∫ÊúØÂÆ∂'],
            relationships: {
                overview: '‰Ωú‰∏∫ENFPÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÊÉÖÊÑüËøûÊé•„ÄÅÊñ∞Â•áÊÑüÂíåÂÖ±ÂêåÊàêÈïø„ÄÇ',
                romantic: 'ÈúÄË¶ÅËÉΩÂ§üÁêÜËß£‰Ω†Â§öÂèòÂ§©ÊÄßÁöÑ‰º¥‰æ£',
                friendship: 'Êã•ÊúâÂπøÊ≥õËÄåÂ§öÊ†∑ÁöÑÊúãÂèãÂúà',
                family: 'Â∏¶Êù•Ê¨¢‰πêÂíåÊ¥ªÂäõ',
                advice: 'Â≠¶‰ºö‰∏ìÊ≥®‰∫éÂΩìÂâçÂÖ≥Á≥ªÔºåÈÅøÂÖçÊÄªÊòØÂØªÊâæ‰∏ã‰∏Ä‰∏™Êñ∞Â•á‰ΩìÈ™å„ÄÇ'
            },
            growth: [
                { step: 1, title: '‰∏ìÊ≥®ÂüπÂÖª', desc: 'Â≠¶‰ºöÂùöÊåÅÂÆåÊàêÈáçË¶Å‰ªªÂä°' },
                { step: 2, title: 'Ê∑±Â∫¶ÊâøËØ∫', desc: 'Âú®ÂÖ≥Á≥ª‰∏≠‰øùÊåÅÊ∑±Â∫¶ÊäïÂÖ•' },
                { step: 3, title: 'Áé∞ÂÆûËßÑÂàí', desc: 'Â∞ÜÂàõÊÑèËΩ¨Âåñ‰∏∫ÂèØË°åËÆ°Âàí' }
            ]
        }
    ],
    
    // ÂÆàÊä§ËÄÖÁªÑ (SJ)
    sentinels: [
        {
            type: 'ISTJ',
            name: 'Áâ©ÊµÅÂ∏à',
            emoji: 'üìã',
            description: 'Áâ©ÊµÅÂ∏àÊòØÂÆûÁî®‰∏ª‰πâÂíåÊ≥®Èáç‰∫ãÂÆûÁöÑ‰∏™‰∫∫Ôºå‰ªñ‰ª¨ÁöÑÂèØÈù†ÊÄß‰∏çÂÆπÊÄÄÁñë„ÄÇ',
            quote: 'ÁªÜËäÇÂÜ≥ÂÆöÊàêË¥•„ÄÇ',
            traits: ['Ë¥üË¥£‰ªª', 'ÂèØÈù†', 'Âä°ÂÆû', 'Ê≥®ÈáçÁªÜËäÇ', 'Âø†ËØö', 'ÊúâÊù°ÁêÜ'],
            strengths: [
                { icon: 'üõ°Ô∏è', text: 'Âº∫ÁÉàÁöÑË¥£‰ªªÊÑüÂíåÂèØÈù†ÊÄß' },
                { icon: 'üîç', text: 'Ê≥®ÈáçÁªÜËäÇÂíåÂáÜÁ°ÆÊÄß' },
                { icon: '‚öñÔ∏è', text: 'ËØöÂÆûÂíåÊ≠£Áõ¥' },
                { icon: 'üìä', text: 'Âá∫Ëâ≤ÁöÑÁªÑÁªáËÉΩÂäõ' }
            ],
            challenges: [
                { icon: 'üóø', text: 'ÂèØËÉΩËøá‰∫éÂõ∫Êâß' },
                { icon: 'üîÑ', text: 'ÂèØËÉΩÂØπÂèòÂåñÈÄÇÂ∫î‰∏çËâØ' },
                { icon: 'üí≠', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éË°®ËææÊÉÖÊÑü' },
                { icon: '‚öñÔ∏è', text: 'ÂèØËÉΩËøá‰∫éÊâπÂà§' }
            ],
            careers: ['‰ºöËÆ°Â∏à', 'ÂæãÂ∏à', 'ÂåªÁîü', 'Â∑•Á®ãÂ∏à', 'Èì∂Ë°åÂÆ∂'],
            relationships: {
                overview: '‰Ωú‰∏∫ISTJÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÁ®≥ÂÆö„ÄÅÂø†ËØöÂíåÂÖ±Âêå‰ª∑ÂÄºËßÇ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÂèØÈù†Âíå‰º†ÁªüÁöÑ‰º¥‰æ£',
                friendship: 'ËôΩÁÑ∂ÊúãÂèã‰∏çÂ§ö‰ΩÜÈÉΩÂæàÊ∑±Âéö',
                family: 'ÊòØÂÆ∂Â∫≠ÁöÑÊîØÊü±ÂíåÂÆàÊä§ËÄÖ',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÊÉÖÊÑüÔºåÂ∞ùËØïÊé•ÂèóÂèòÂåñÂíåÊñ∞‰ΩìÈ™å„ÄÇ'
            },
            growth: [
                { step: 1, title: 'ÁÅµÊ¥ªÈÄÇÂ∫î', desc: 'Â≠¶‰ºöÊé•ÂèóÂíåÈÄÇÂ∫îÂèòÂåñ' },
                { step: 2, title: 'ÊÉÖÊÑüË°®Ëææ', desc: 'ÁªÉ‰π†Ë°®ËææÂÜÖÂøÉÊÑüÂèó' },
                { step: 3, title: 'ÂºÄÊîæÊÄùÁª¥', desc: 'Â∞ùËØïÊñ∞ÁöÑÂèØËÉΩÊÄß' }
            ]
        },
        {
            type: 'ISFJ',
            name: 'ÂÆàÂç´ËÄÖ',
            emoji: 'üõ°Ô∏è',
            description: 'ÂÆàÂç´ËÄÖÊòØÈùûÂ∏∏‰∏ìÊ≥®ÂíåÊ∏©ÊöñÁöÑÂÆàÊä§ËÄÖÔºåÊó∂ÂàªÂáÜÂ§á‰øùÊä§Áà±‰ªñ‰ª¨ÁöÑ‰∫∫„ÄÇ',
            quote: 'ÊúçÂä°‰ªñ‰∫∫ÊòØÊúÄÈ´òÂ∞öÁöÑ‰ΩøÂëΩ„ÄÇ',
            traits: ['ÊîØÊåÅ', 'ÂèØÈù†', 'ËÄêÂøÉ', 'ÂÆûÁî®', 'ÂÖ≥ÊÄÄ', 'Âø†ËØö'],
            strengths: [
                { icon: 'üíù', text: 'Âº∫ÁÉàÁöÑÊîØÊåÅÊÄßÂíåÂø†ËØö' },
                { icon: 'üß†', text: 'Âá∫Ëâ≤ÁöÑËÆ∞ÂøÜÂäõÂíåÁªÜËäÇÂÖ≥Ê≥®' },
                { icon: '‚è≥', text: 'ËÄêÂøÉÂíåÂÆûÁî®‰∏ª‰πâ' },
                { icon: 'ü§ù', text: 'Âº∫ÁÉàÁöÑË¥£‰ªªÊÑü' }
            ],
            challenges: [
                { icon: 'üéÅ', text: 'ÂèØËÉΩËøá‰∫éÂà©‰ªñ' },
                { icon: 'üíî', text: 'ÂèØËÉΩÂØπÊâπËØÑËøá‰∫éÊïèÊÑü' },
                { icon: 'üîÑ', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÊîπÂèò' },
                { icon: 'üôç', text: 'ÂèØËÉΩÂéãÊäëËá™Â∑±ÁöÑÈúÄÊ±Ç' }
            ],
            careers: ['Êä§Â£´', 'ÊïôÂ∏à', 'Á§æ‰ºöÂ∑•‰ΩúËÄÖ', '‰∫∫ÂäõËµÑÊ∫ê', 'Ë°åÊîøÂä©ÁêÜ'],
            relationships: {
                overview: '‰Ωú‰∏∫ISFJÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÁ®≥ÂÆö„ÄÅÂíåË∞êÂíåÁõ∏‰∫íÊîØÊåÅ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÊ¨£Ëµè‰Ω†‰ªòÂá∫ÁöÑ‰º¥‰æ£',
                friendship: 'ÊòØÊúãÂèã‰∏≠ÁöÑÂÄæÂê¨ËÄÖÂíåÊîØÊåÅËÄÖ',
                family: 'Êó†Êù°‰ª∂Âú∞ÂÖ≥Áà±ÂÆ∂‰∫∫',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÈúÄÊ±ÇÔºå‰∏çË¶ÅÊÄªÊòØÁâ∫Áâ≤Ëá™Â∑±„ÄÇ'
            },
            growth: [
                { step: 1, title: 'Ëá™Êàë‰∏ªÂº†', desc: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÈúÄÊ±ÇÂíåÊÑèËßÅ' },
                { step: 2, title: 'ÂèòÂåñÊã•Êä±', desc: 'ÁßØÊûÅÈù¢ÂØπÁîüÊ¥ª‰∏≠ÁöÑÂèòÂåñ' },
                { step: 3, title: 'ÁïåÈôêËÆæÂÆö', desc: '‰øùÊä§Ëá™Â∑±ÁöÑËÉΩÈáèÂíåÊó∂Èó¥' }
            ]
        },
        {
            type: 'ESTJ',
            name: 'ÊÄªÁªèÁêÜ',
            emoji: 'üìä',
            description: 'ÊÄªÁªèÁêÜÊòØÂá∫Ëâ≤ÁöÑÁÆ°ÁêÜËÄÖÔºåÂú®ÁÆ°ÁêÜ‰∫ãÊÉÖÊàñ‰∫∫ÁöÑÊó∂ÂÄô‰∏çÂèØÈÅøÂÖçÂú∞Ê∏¥Êúõ‰º†ÁªüÂíåÁß©Â∫è„ÄÇ',
            quote: 'Áß©Â∫èÊòØËá™Áî±ÁöÑ‰øùÈöú„ÄÇ',
            traits: ['‰∏ìÊ≥®', 'Á≤æÂäõÂÖÖÊ≤õ', 'Ëá™‰ø°', 'ÂùöÂº∫ÊÑèÂøó', 'Âä°ÂÆû', 'ÁªÑÁªáÂäõÂº∫'],
            strengths: [
                { icon: 'üëî', text: 'Âá∫Ëâ≤ÁöÑÁªÑÁªáÂíåÁÆ°ÁêÜËÉΩÂäõ' },
                { icon: 'üí™', text: 'Âº∫ÁÉàÁöÑË¥£‰ªªÊÑüÂíåÂèØÈù†ÊÄß' },
                { icon: 'üéØ', text: 'ÂÆûÁî®ÂíåÁõ¥Êé•' },
                { icon: '‚úÖ', text: 'Ëá¥Âäõ‰∫éÂÆåÊàê‰ªªÂä°' }
            ],
            challenges: [
                { icon: 'üóø', text: 'ÂèØËÉΩËøá‰∫éÂõ∫Êâß' },
                { icon: 'üí≠', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éË°®ËææÊÉÖÊÑü' },
                { icon: '‚öñÔ∏è', text: 'ÂèØËÉΩËøá‰∫éÊâπÂà§' },
                { icon: 'üëÇ', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÊé•ÂèóÊâπËØÑ' }
            ],
            careers: ['‰ºÅ‰∏öÁÆ°ÁêÜËÄÖ', '‰ºöËÆ°Â∏à', 'ÂÜõÂÆò', 'Ê≥ïÂÆò', 'ÊïôÂ∏à'],
            relationships: {
                overview: '‰Ωú‰∏∫ESTJÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÁ®≥ÂÆö„ÄÅÂø†ËØöÂíåÂÖ±Âêå‰ª∑ÂÄºËßÇ„ÄÇ',
                romantic: 'ÈúÄË¶Å‰º†ÁªüÂíåÂèØÈù†ÁöÑ‰º¥‰æ£',
                friendship: 'ÊòØÊúãÂèãÂúà‰∏≠ÁöÑÁªÑÁªáËÄÖ',
                family: '‰∏∫ÂÆ∂Â∫≠Êèê‰æõÁªìÊûÑÂíåÁ®≥ÂÆö',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÊÉÖÊÑüÔºåÂ∞ùËØïÁêÜËß£‰º¥‰æ£ÁöÑÊÉÖÊÑüÈúÄÊ±Ç„ÄÇ'
            },
            growth: [
                { step: 1, title: 'ÊÉÖÊÑüÊô∫ÊÖß', desc: 'ÂèëÂ±ïÂíåË°®ËææÊÉÖÊÑü' },
                { step: 2, title: 'ÁÅµÊ¥ªÊÄùÁª¥', desc: 'Êé•Âèó‰∏çÂêåÁöÑËßÇÁÇπÂíåÊñπÂºè' },
                { step: 3, title: 'ÂÄæÂê¨Ëâ∫ÊúØ', desc: 'ÁúüÊ≠£Âê¨Âèñ‰ªñ‰∫∫ÊÑèËßÅ' }
            ]
        },
        {
            type: 'ESFJ',
            name: 'ÊâßÊîøÂÆò',
            emoji: 'ü§ù',
            description: 'ÊâßÊîøÂÆòÊòØÊûÅÊúâÂêåÊÉÖÂøÉÁöÑ‰∫∫Ôºå‰ªñ‰ª¨ÊÄªÊòØÁÉ≠ÂøÉÂú∞Êèê‰æõÂ∏ÆÂä©ÂíåÈºìÂä±„ÄÇ',
            quote: 'ÂíåË∞êÊòØÁæéÂ•ΩÁîüÊ¥ªÁöÑÂü∫Áü≥„ÄÇ',
            traits: ['ÊîØÊåÅ', 'ÂèØÈù†', 'ÊúâËÄêÂøÉ', 'ÁßØÊûÅ', 'ÂÖ≥ÊÄÄ', 'ÂíåË∞ê'],
            strengths: [
                { icon: '‚ù§Ô∏è', text: 'Âº∫ÁÉàÁöÑÂêåÁêÜÂøÉÂíåÊîØÊåÅÊÄß' },
                { icon: 'üë•', text: 'Âá∫Ëâ≤ÁöÑÁ§æ‰∫§ÊäÄËÉΩ' },
                { icon: 'üõ†Ô∏è', text: 'ÂÆûÁî®ÂíåÂèØÈù†' },
                { icon: 'üåü', text: 'Ëá¥Âäõ‰∫éÂ∏ÆÂä©‰ªñ‰∫∫' }
            ],
            challenges: [
                { icon: 'üëÄ', text: 'ÂèØËÉΩËøá‰∫éÂú®ÊÑè‰ªñ‰∫∫ÁúãÊ≥ï' },
                { icon: '‚öîÔ∏è', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÂ§ÑÁêÜÂÜ≤Á™Å' },
                { icon: 'üôç', text: 'ÂèØËÉΩÂøΩËßÜËá™Â∑±ÁöÑÈúÄÊ±Ç' },
                { icon: 'üíî', text: 'ÂèØËÉΩÂØπÊâπËØÑËøá‰∫éÊïèÊÑü' }
            ],
            careers: ['Êä§Â£´', 'ÊïôÂ∏à', 'Á§æ‰ºöÂ∑•‰ΩúËÄÖ', '‰∫∫ÂäõËµÑÊ∫ê', 'ÈîÄÂîÆ'],
            relationships: {
                overview: '‰Ωú‰∏∫ESFJÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÂíåË∞ê„ÄÅÁ®≥ÂÆöÂíåÁõ∏‰∫íÊîØÊåÅ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÊ¨£Ëµè‰Ω†‰ªòÂá∫ÁöÑ‰º¥‰æ£',
                friendship: 'ÊòØÊúãÂèãÂúà‰∏≠ÁöÑÁ≤òÂêàÂâÇ',
                family: 'Êó†Êù°‰ª∂Âú∞ÂÖ≥Áà±ÂíåÁÖßÈ°æ',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÈúÄÊ±ÇÔºå‰∏çË¶ÅÊÄªÊòØÁâ∫Áâ≤Ëá™Â∑±„ÄÇ'
            },
            growth: [
                { step: 1, title: 'Ëá™Êàë‰ª∑ÂÄº', desc: '‰ªéÂÜÖÂú®ËÄåÈùûÂ§ñÂú®ËÆ§ÂèØ‰∏≠Ëé∑Âæó‰ª∑ÂÄº' },
                { step: 2, title: 'ÂÜ≤Á™ÅÈù¢ÂØπ', desc: 'Â≠¶‰ºöÂª∫ËÆæÊÄßÂú∞Â§ÑÁêÜÂàÜÊ≠ß' },
                { step: 3, title: 'Áã¨Á´ãÊÄùËÄÉ', desc: 'ÂüπÂÖªËá™Â∑±ÁöÑËßÇÁÇπÂíåÂà§Êñ≠' }
            ]
        }
    ],
    
    // Êé¢Èô©ÂÆ∂ÁªÑ (SP)
    explorers: [
        {
            type: 'ISTP',
            name: 'Èâ¥ËµèÂÆ∂',
            emoji: 'üîß',
            description: 'Èâ¥ËµèÂÆ∂ÊòØÂ§ßËÉÜËÄåÂÆûÈôÖÁöÑÂÆûÈ™åÂÆ∂Ôºå‰ªñ‰ª¨ÊìÖÈïø‰ΩøÁî®ÂêÑÁßçÂ∑•ÂÖ∑„ÄÇ',
            quote: 'ÂÆûË∑µÊòØÊ£ÄÈ™åÁúüÁêÜÁöÑÂîØ‰∏ÄÊ†áÂáÜ„ÄÇ',
            traits: ['Â•ΩÂ•á', 'ÂÆûÁî®', 'ÊîæÊùæ', 'ÊìÖÈïøÂç±Êú∫Â§ÑÁêÜ', 'Áã¨Á´ã', 'ÁÅµÊ¥ª'],
            strengths: [
                { icon: 'üîß', text: 'Âá∫Ëâ≤ÁöÑÂä®ÊâãËÉΩÂäõ' },
                { icon: 'üòå', text: 'ÂÜ∑ÈùôÂíåÁêÜÊÄß' },
                { icon: 'üîÑ', text: 'ÈÄÇÂ∫îÊÄßÂº∫' },
                { icon: '‚ö°', text: 'ÂØπÂç±Êú∫ÂèçÂ∫îËøÖÈÄü' }
            ],
            challenges: [
                { icon: '‚ùÑÔ∏è', text: 'ÂèØËÉΩÊòæÂæóËøá‰∫éÂÜ∑Êº†' },
                { icon: 'üóìÔ∏è', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÈïøÊúüËßÑÂàí' },
                { icon: 'üí≠', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éË°®ËææÊÉÖÊÑü' },
                { icon: 'üé≤', text: 'ÂèØËÉΩËøá‰∫éÂÜíÈô©' }
            ],
            careers: ['Â∑•Á®ãÂ∏à', 'ÊäÄÊúØÂëò', 'Ê∂àÈò≤Âëò', 'È£ûË°åÂëò', 'Êú∫Ê¢∞Â∏à'],
            relationships: {
                overview: '‰Ωú‰∏∫ISTPÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇËá™Áî±„ÄÅÁ©∫Èó¥ÂíåÂÆûÈôÖÊîØÊåÅ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÁªô‰∫à‰Ω†Á©∫Èó¥ÂíåËá™Áî±ÁöÑ‰º¥‰æ£',
                friendship: 'ÂñúÊ¨¢‰∏ÄËµ∑Âä®ÊâãÂÅö‰∫ãÊÉÖÁöÑÊúãÂèã',
                family: 'ÈÄöËøáË°åÂä®ËÄåÈùûË®ÄËØ≠Ë°®ËææÂÖ≥Áà±',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÊÉÖÊÑüÔºåÂ∞ùËØïÁêÜËß£‰º¥‰æ£ÁöÑÊÉÖÊÑüÈúÄÊ±Ç„ÄÇ'
            },
            growth: [
                { step: 1, title: 'ÊÉÖÊÑüËßâÂØü', desc: 'ËØÜÂà´ÂíåË°®ËææËá™Â∑±ÁöÑÊÑüÂèó' },
                { step: 2, title: 'ÈïøÊúüËßÑÂàí', desc: 'Âà∂ÂÆöÂπ∂ÂùöÊåÅÈïøÊúüÁõÆÊ†á' },
                { step: 3, title: 'Ê∑±Â∫¶ËøûÊé•', desc: 'ÂüπÂÖªÊõ¥Ê∑±Â±ÇÁöÑ‰∫∫ÈôÖÂÖ≥Á≥ª' }
            ]
        },
        {
            type: 'ISFP',
            name: 'Êé¢Èô©ÂÆ∂',
            emoji: 'üé®',
            description: 'Êé¢Èô©ÂÆ∂ÊòØÁÅµÊ¥ªËÄåÊúâÈ≠ÖÂäõÁöÑËâ∫ÊúØÂÆ∂Ôºå‰ªñ‰ª¨Êó∂ÂàªÂáÜÂ§áÁùÄÊé¢Á¥¢Êñ∞ÁöÑÂèØËÉΩÊÄß„ÄÇ',
            quote: 'ÁæéÂ≠òÂú®‰∫éÁîüÊ¥ªÁöÑÊØè‰∏Ä‰∏™Áû¨Èó¥„ÄÇ',
            traits: ['ÊúâÂàõÈÄ†Âäõ', 'ÁÉ≠ÊÉÖ', 'Ëá™ÁÑ∂', 'Â•ΩÂ•á', 'ÊïèÊÑü', 'Ëâ∫ÊúØÊÄß'],
            strengths: [
                { icon: 'üé®', text: 'Âº∫ÁÉàÁöÑÂÆ°ÁæéÊÑü' },
                { icon: 'üí°', text: 'ÂØåÊúâÂàõÈÄ†ÂäõÂíåÊÉ≥Ë±°Âäõ' },
                { icon: 'üíù', text: 'ÊïèÊÑüÂíåÂñÑËâØ' },
                { icon: 'üå∏', text: 'ÂØπÂΩì‰∏ãÊúâÊ∑±Âàª‰ΩìÈ™å' }
            ],
            challenges: [
                { icon: 'üíî', text: 'ÂèØËÉΩËøá‰∫éÊïèÊÑü' },
                { icon: 'üóìÔ∏è', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÈïøÊúüËßÑÂàí' },
                { icon: 'üéØ', text: 'ÂèØËÉΩÂØπÊâπËØÑËøá‰∫éÊïèÊÑü' },
                { icon: 'üèÉ', text: 'ÂèØËÉΩËøá‰∫éÁã¨Á´ã' }
            ],
            careers: ['Ëâ∫ÊúØÂÆ∂', 'ËÆæËÆ°Â∏à', 'Èü≥‰πêÂÆ∂', 'ÊëÑÂΩ±Â∏à', 'ÂøÉÁêÜÂí®ËØ¢Â∏à'],
            relationships: {
                overview: '‰Ωú‰∏∫ISFPÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÁúüÂÆûÁöÑÊÉÖÊÑüËøûÊé•ÂíåÂÖ±Âêå‰ª∑ÂÄºËßÇ„ÄÇ',
                romantic: 'ÈúÄË¶ÅÁêÜËß£‰Ω†Ëâ∫ÊúØÂ§©ÊÄßÁöÑ‰º¥‰æ£',
                friendship: 'ÈáçËßÜÁúüËØöÂíåÊ∑±Â∫¶ÁöÑÂèãË∞ä',
                family: 'ÈÄöËøáÂàõÈÄ†ÂíåË°åÂä®Ë°®ËææÁà±',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÈúÄÊ±ÇÂíåÊÑüÂèóÔºå‰∏çË¶ÅÊÄªÊòØÈöêËóèËá™Â∑±„ÄÇ'
            },
            growth: [
                { step: 1, title: 'Ëá™‰ø°Âª∫Á´ã', desc: 'Áõ∏‰ø°Ëá™Â∑±ÁöÑËâ∫ÊúØ‰ª∑ÂÄº' },
                { step: 2, title: 'Êú™Êù•ËßÑÂàí', desc: 'Â≠¶‰ºö‰∏∫Êú™Êù•ÂÅöÂáÜÂ§á' },
                { step: 3, title: 'Ëá™ÊàëË°®Ëææ', desc: 'ÂãáÊï¢Âú∞Â±ïÁ§∫ÁúüÂÆûÁöÑËá™Â∑±' }
            ]
        },
        {
            type: 'ESTP',
            name: '‰ºÅ‰∏öÂÆ∂',
            emoji: 'üöÄ',
            description: '‰ºÅ‰∏öÂÆ∂ÊòØËÅ™Êòé„ÄÅÁ≤æÂäõÂÖÖÊ≤õÁöÑÊÑüÁü•ËÄÖÔºå‰ªñ‰ª¨ÁúüÂøÉ‰∫´ÂèóÁîüÊ¥ªÂú®ËæπÁºòÁöÑÊÑüËßâ„ÄÇ',
            quote: 'ÁîüÂëΩÂú®‰∫éÂÜíÈô©ÔºåËÄåÈùûÂÆâÈÄ∏„ÄÇ',
            traits: ['Á≤æÂäõÂÖÖÊ≤õ', 'ÊÑüÁü•ÊïèÈîê', 'Ëá™Âèë', 'ÂÆûÁî®', 'ÂÜíÈô©', 'Ê¥ªÂäõ'],
            strengths: [
                { icon: 'üëÅÔ∏è', text: 'Âá∫Ëâ≤ÁöÑËßÇÂØüÂäõ' },
                { icon: 'üîÑ', text: 'ÈÄÇÂ∫îÊÄßÂº∫' },
                { icon: '‚ö°', text: 'Á≤æÂäõÂÖÖÊ≤õÂíåÁÉ≠ÊÉÖ' },
                { icon: 'üö®', text: 'ÂØπÂç±Êú∫ÂèçÂ∫îËøÖÈÄü' }
            ],
            challenges: [
                { icon: '‚ö°', text: 'ÂèØËÉΩËøá‰∫éÂÜ≤Âä®' },
                { icon: 'üóìÔ∏è', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÈïøÊúüËßÑÂàí' },
                { icon: 'üí≠', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éË°®ËææÊÉÖÊÑü' },
                { icon: 'üé≤', text: 'ÂèØËÉΩËøá‰∫éÂÜíÈô©' }
            ],
            careers: ['ÈîÄÂîÆ', '‰ºÅ‰∏öÂÆ∂', 'ËøêÂä®Âëò', 'Ë°®ÊºîËÄÖ', 'Ë≠¶ÂØü'],
            relationships: {
                overview: '‰Ωú‰∏∫ESTPÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±ÇÂà∫ÊøÄ„ÄÅ‰πêË∂£ÂíåÂÆûÈôÖÊîØÊåÅ„ÄÇ',
                romantic: 'ÈúÄË¶ÅËÉΩË∑ü‰∏ä‰Ω†ËäÇÂ•èÁöÑÊ¥ªË∑É‰º¥‰æ£',
                friendship: 'ÂñúÊ¨¢‰∏ÄËµ∑ÂÜíÈô©Âíå‰ΩìÈ™åÊñ∞‰∫ãÁâ©',
                family: 'Â∏¶Êù•Ê¥ªÂäõÂíå‰πêË∂£',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÊÉÖÊÑüÔºåÂ∞ùËØïÁêÜËß£‰º¥‰æ£ÁöÑÊÉÖÊÑüÈúÄÊ±Ç„ÄÇ'
            },
            growth: [
                { step: 1, title: 'Ê∑±Â∫¶ÊÄùËÄÉ', desc: 'Âú®Ë°åÂä®ÂâçËøõË°åÊõ¥Â§öÊÄùËÄÉ' },
                { step: 2, title: 'ÊÉÖÊÑüÂèëÂ±ï', desc: 'ÂüπÂÖªÂíåË°®ËææÊÉÖÊÑü' },
                { step: 3, title: 'ÊâøËØ∫ÂùöÊåÅ', desc: 'Â≠¶‰ºöÂØπÈáçË¶Å‰∫ãÊÉÖ‰øùÊåÅÊâøËØ∫' }
            ]
        },
        {
            type: 'ESFP',
            name: 'Â®±‰πêÂÆ∂',
            emoji: 'üéâ',
            description: 'Â®±‰πêÂÆ∂ÊòØËá™ÂèëÁöÑ„ÄÅÁ≤æÂäõÂÖÖÊ≤õÂíåÁÉ≠ÊÉÖÁöÑË°®ÊºîËÄÖÔºå‰ªñ‰ª¨ÁîüÊ¥ªÂú®‰ªñ‰ª¨Âë®Âõ¥‰ªé‰∏çÊÑüÂà∞Êó†ËÅä„ÄÇ',
            quote: 'ÁîüÊ¥ªÊòØ‰∏ÄÂú∫ËàûÂè∞ÔºåÂ∞ΩÊÉÖË°®ÊºîÂêß„ÄÇ',
            traits: ['ÁÉ≠ÊÉÖ', 'ÂèãÂñÑ', 'Â§ñÂêë', 'Ëá™Âèë', '‰πêËßÇ', 'Ê¥ªÊ≥º'],
            strengths: [
                { icon: 'üé≠', text: 'Âá∫Ëâ≤ÁöÑÁ§æ‰∫§ÊäÄËÉΩ' },
                { icon: 'üî•', text: 'ÁÉ≠ÊÉÖÂíåÊ¥ªÂäõ' },
                { icon: 'üõ†Ô∏è', text: 'ÂÆûÁî®ÂíåÂä°ÂÆû' },
                { icon: 'üåà', text: 'ÂØπÂΩì‰∏ãÊúâÊ∑±Âàª‰ΩìÈ™å' }
            ],
            challenges: [
                { icon: '‚ö°', text: 'ÂèØËÉΩËøá‰∫éÂÜ≤Âä®' },
                { icon: 'üóìÔ∏è', text: 'ÂèØËÉΩ‰∏çÂñÑ‰∫éÈïøÊúüËßÑÂàí' },
                { icon: 'üíî', text: 'ÂèØËÉΩÂØπÊâπËØÑËøá‰∫éÊïèÊÑü' },
                { icon: 'üëÄ', text: 'ÂèØËÉΩËøá‰∫éÂÖ≥Ê≥®ÂΩì‰∏ã' }
            ],
            careers: ['Ë°®ÊºîËÄÖ', 'ÈîÄÂîÆ', 'ÊïôÂ∏à', 'Ê¥ªÂä®Á≠ñÂàí', 'ÂÖ¨ÂÖ≥‰∏ìÂëò'],
            relationships: {
                overview: '‰Ωú‰∏∫ESFPÔºå‰Ω†Âú®ÂÖ≥Á≥ª‰∏≠ÂØªÊ±Ç‰πêË∂£„ÄÅÂà∫ÊøÄÂíåÊÉÖÊÑüËøûÊé•„ÄÇ',
                romantic: 'ÈúÄË¶ÅËÉΩ‰∏ÄËµ∑‰∫´ÂèóÁîüÊ¥ªÁöÑ‰º¥‰æ£',
                friendship: 'ÊòØÊ¥æÂØπÁöÑÁÅµÈ≠Ç‰∫∫Áâ©',
                family: 'Â∏¶Êù•Ê¨¢‰πêÂíåÊ∏©Êöñ',
                advice: 'Â≠¶‰ºöË°®ËææËá™Â∑±ÁöÑÊÉÖÊÑüÔºåÂ∞ùËØïÁêÜËß£‰º¥‰æ£ÁöÑÊÉÖÊÑüÈúÄÊ±Ç„ÄÇ'
            },
            growth: [
                { step: 1, title: 'Êú™Êù•ËßÑÂàí', desc: '‰∏∫ÈïøËøúÁõÆÊ†áÂÅöÂáÜÂ§á' },
                { step: 2, title: 'Ê∑±Â∫¶ÂèçÊÄù', desc: 'Ëä±Êó∂Èó¥ÊÄùËÄÉÊ∑±Â±ÇÈóÆÈ¢ò' },
                { step: 3, title: 'ÂùöÊåÅÊâøËØ∫', desc: 'ÂÆåÊàêÂ∑≤ÊâøËØ∫ÁöÑË¥£‰ªª' }
            ]
        }
    ]
};

// Ëé∑ÂèñÊâÄÊúâ‰∫∫Ê†ºÁ±ªÂûã
const getAllPersonalities = () => {
    return [
        ...PERSONALITY_DATABASE.analysts,
        ...PERSONALITY_DATABASE.diplomats,
        ...PERSONALITY_DATABASE.sentinels,
        ...PERSONALITY_DATABASE.explorers
    ];
};

// ========== ÊµãËØïÈ¢òÂ∫ì ==========
const QUESTION_DATABASE = [
    // E/I Áª¥Â∫¶È¢òÁõÆ (1-5)
    {
        id: 1,
        dimension: 'EI',
        type: 'scenario',
        title: 'Âë®Êú´ÁöÑÊäâÊã©',
        description: '‰∏Ä‰∏™ÈöæÂæóÁöÑÂë®Êú´Ôºå‰Ω†Êõ¥ÂÄæÂêë‰∫éÂ¶Ç‰ΩïÂ∫¶ËøáÔºü',
        illustration: 'üåÖ',
        options: [
            { text: 'Á∫¶‰∏ä‰∏â‰∫îÂ•ΩÂèãÔºåÂéªÁÉ≠ÈóπÁöÑËÅö‰ºöÊàñÊ¥ªÂä®', value: 'E' },
            { text: 'Áã¨Ëá™Âú®ÂÆ∂Ôºå‰∫´ÂèóÂÆâÈùôÁöÑÈòÖËØªÊàñËßÇÂΩ±Êó∂ÂÖâ', value: 'I' }
        ]
    },
    {
        id: 2,
        dimension: 'EI',
        type: 'scenario',
        title: 'Â∑•‰ΩúÊñπÂºè',
        description: 'Âú®Âõ¢ÈòüÈ°πÁõÆ‰∏≠Ôºå‰Ω†Êõ¥ÂñúÊ¨¢ÊâÆÊºî‰ªÄ‰πàËßíËâ≤Ôºü',
        illustration: 'üíº',
        options: [
            { text: 'ÁßØÊûÅÂèëË®ÄÔºåÂ∏¶È¢ÜËÆ®ËÆ∫ÂíåÂÜ≥Á≠ñ', value: 'E' },
            { text: 'Ê∑±ÂÖ•ÊÄùËÄÉÔºåÊèê‰æõÂÖ≥ÈîÆËßÅËß£ÂíåÂª∫ËÆÆ', value: 'I' }
        ]
    },
    {
        id: 3,
        dimension: 'EI',
        type: 'scenario',
        title: 'ËÉΩÈáèÊù•Ê∫ê',
        description: 'ÂΩì‰Ω†ÊÑüÂà∞Áñ≤ÊÉ´Êó∂Ôºå‰ªÄ‰πàÊñπÂºèÊúÄËÉΩËÆ©‰Ω†ÊÅ¢Â§çÁ≤æÂäõÔºü',
        illustration: 'üîã',
        options: [
            { text: 'ÂíåÊúãÂèãËÅäÂ§©ÔºåÂèÇÂä†Á§æ‰∫§Ê¥ªÂä®', value: 'E' },
            { text: 'Áã¨Â§ÑÂèçÊÄùÔºå‰∫´Âèó‰∏™‰∫∫Á©∫Èó¥', value: 'I' }
        ]
    },
    {
        id: 4,
        dimension: 'EI',
        type: 'scenario',
        title: 'ÊóÖË°åÂÅèÂ•Ω',
        description: 'ËÆ°Âàí‰∏ÄÊ¨°ÊóÖË°åÔºå‰Ω†Êõ¥ÂÄæÂêë‰∫éÔºü',
        illustration: '‚úàÔ∏è',
        options: [
            { text: 'ÁÉ≠ÈóπÁöÑÁõÆÁöÑÂú∞ÔºåÁªìËØÜÊñ∞ÊúãÂèãÔºå‰ΩìÈ™åÂΩìÂú∞ÊñáÂåñ', value: 'E' },
            { text: 'ÂÆâÈùôÁöÑÂú∞ÊñπÔºåÊ∑±Â∫¶Êé¢Á¥¢Ôºå‰∫´ÂèóÁã¨Â§ÑÊó∂ÂÖâ', value: 'I' }
        ]
    },
    {
        id: 5,
        dimension: 'EI',
        type: 'scenario',
        title: 'Ê¥æÂØπÂú∫ÊôØ',
        description: 'ÂèÇÂä†‰∏Ä‰∏™Ê¥æÂØπÔºå‰Ω†ÈÄöÂ∏∏‰ºöÔºü',
        illustration: 'üéâ',
        options: [
            { text: '‰∏ªÂä®‰∏éÈôåÁîü‰∫∫‰∫§Ë∞àÔºåÊâ©Â§ßÁ§æ‰∫§Âúà', value: 'E' },
            { text: 'ÂíåÁÜüÊÇâÁöÑÊúãÂèãÂæÖÂú®‰∏ÄËµ∑Ôºå‰∫´ÂèóÊ∏©È¶®Êó∂ÂÖâ', value: 'I' }
        ]
    },
    
    // S/N Áª¥Â∫¶È¢òÁõÆ (6-10)
    {
        id: 6,
        dimension: 'SN',
        type: 'scenario',
        title: 'Â≠¶‰π†ÊñπÂºè',
        description: 'Èù¢ÂØπÊñ∞Áü•ËØÜÔºå‰Ω†Êõ¥ÂñúÊ¨¢Ôºü',
        illustration: 'üìö',
        options: [
            { text: 'ÂÖ∑‰ΩìÂÆûÁî®ÁöÑÊñπÊ≥ïÔºåÁ´ãÂç≥ÂèØÁî®', value: 'S' },
            { text: 'ÁêÜËÆ∫Ê°ÜÊû∂ÂíåÊ¶ÇÂøµÔºåÁêÜËß£Â∫ïÂ±ÇÂéüÁêÜ', value: 'N' }
        ]
    },
    {
        id: 7,
        dimension: 'SN',
        type: 'scenario',
        title: 'Ëß£ÂÜ≥ÈóÆÈ¢ò',
        description: 'ÈÅáÂà∞Â§çÊùÇÈóÆÈ¢òÊó∂Ôºå‰Ω†ÂÄæÂêë‰∫éÔºü',
        illustration: 'üß©',
        options: [
            { text: 'ÂÖ≥Ê≥®‰∫ãÂÆûÂíåÁªÜËäÇÔºåÈÄêÊ≠•Ëß£ÂÜ≥', value: 'S' },
            { text: 'ÂØªÊâæÊ®°ÂºèÂíåÂèØËÉΩÊÄßÔºåÂàõÊñ∞Ëß£ÂÜ≥ÊñπÊ°à', value: 'N' }
        ]
    },
    {
        id: 8,
        dimension: 'SN',
        type: 'scenario',
        title: 'Ëâ∫ÊúØÊ¨£Ëµè',
        description: 'ÂèÇËßÇËâ∫ÊúØÂ±ïËßàÊó∂Ôºå‰Ω†Êõ¥ÂÖ≥Ê≥®Ôºü',
        illustration: 'üé®',
        options: [
            { text: 'ÊäÄÊ≥ï„ÄÅËâ≤ÂΩ©ÂíåÊûÑÂõæÁ≠âÂÖ∑‰ΩìÂÖÉÁ¥†', value: 'S' },
            { text: '‰ΩúÂìÅËÉåÂêéÁöÑË±°ÂæÅÊÑè‰πâÂíåÊÉÖÊÑüË°®Ëææ', value: 'N' }
        ]
    },
    {
        id: 9,
        dimension: 'SN',
        type: 'scenario',
        title: 'Êú™Êù•ËßÑÂàí',
        description: 'ÊÄùËÄÉÊú™Êù•Êó∂Ôºå‰Ω†Êõ¥ÂÄæÂêë‰∫éÔºü',
        illustration: 'üîÆ',
        options: [
            { text: 'ËÆæÂÆöÂÖ∑‰ΩìÂèØË°åÁöÑÁü≠ÊúüÁõÆÊ†á', value: 'S' },
            { text: 'ÊûÑÊÉ≥ÈïøËøúÊÑøÊôØÂíåÂèØËÉΩÊÄß', value: 'N' }
        ]
    },
    {
        id: 10,
        dimension: 'SN',
        type: 'scenario',
        title: '‰ºöËÆÆËÆ®ËÆ∫',
        description: 'ÂèÇÂä†Â∑•‰Ωú‰ºöËÆÆÊó∂Ôºå‰Ω†Êõ¥ÂÖ≥Ê≥®Ôºü',
        illustration: 'üìä',
        options: [
            { text: 'ÂÖ∑‰ΩìÁöÑÊï∞ÊçÆ„ÄÅ‰∫ãÂÆûÂíåÊâßË°åÁªÜËäÇ', value: 'S' },
            { text: 'Êï¥‰ΩìÊñπÂêë„ÄÅÊàòÁï•ÂíåÊú™Êù•ÂèØËÉΩÊÄß', value: 'N' }
        ]
    },
    
    // T/F Áª¥Â∫¶È¢òÁõÆ (11-15)
    {
        id: 11,
        dimension: 'TF',
        type: 'scenario',
        title: 'ÂÜ≥Á≠ñ‰æùÊçÆ',
        description: 'ÂÅöÈáçË¶ÅÂÜ≥ÂÆöÊó∂Ôºå‰Ω†Êõ¥‰æùËµñÔºü',
        illustration: '‚öñÔ∏è',
        options: [
            { text: 'ÈÄªËæëÂàÜÊûêÂíåÂÆ¢ËßÇ‰∫ãÂÆû', value: 'T' },
            { text: '‰ª∑ÂÄºËßÇÂíåÂØπ‰ªñ‰∫∫ÁöÑÂΩ±Âìç', value: 'F' }
        ]
    },
    {
        id: 12,
        dimension: 'TF',
        type: 'scenario',
        title: 'ÂÜ≤Á™ÅÂ§ÑÁêÜ',
        description: 'Èù¢ÂØπÂõ¢ÈòüÂÜ≤Á™ÅÔºå‰Ω†‰ºöÔºü',
        illustration: 'ü§ù',
        options: [
            { text: 'ÂàÜÊûêÈóÆÈ¢òÔºåÊâæÂá∫ÂÖ¨Âπ≥ÂêàÁêÜÁöÑËß£ÂÜ≥ÊñπÊ°à', value: 'T' },
            { text: 'ÂÖ≥Ê≥®ÂêÑÊñπÊÑüÂèóÔºåÂØªÊ±ÇÂíåË∞êÂÖ±Â§Ñ', value: 'F' }
        ]
    },
    {
        id: 13,
        dimension: 'TF',
        type: 'scenario',
        title: 'ËØÑ‰ª∑‰ªñ‰∫∫',
        description: 'ËØÑ‰ª∑‰∏Ä‰∏™‰∫∫ÁöÑÂ∑•‰ΩúË°®Áé∞Êó∂Ôºå‰Ω†Êõ¥ÁúãÈáçÔºü',
        illustration: 'üìà',
        options: [
            { text: 'ÂÆ¢ËßÇÊàêÊûúÂíåÊïàÁéá', value: 'T' },
            { text: 'Âä™ÂäõÁ®ãÂ∫¶ÂíåÊÄÅÂ∫¶', value: 'F' }
        ]
    },
    {
        id: 14,
        dimension: 'TF',
        type: 'scenario',
        title: 'Áªô‰∫àÂèçÈ¶à',
        description: 'Áªô‰ªñ‰∫∫ÊèêÂª∫ËÆÆÊó∂Ôºå‰Ω†ÂÄæÂêë‰∫éÔºü',
        illustration: 'üí¨',
        options: [
            { text: 'Áõ¥Êé•ÊåáÂá∫ÈóÆÈ¢òÂíåÊîπËøõÊñπÊ≥ï', value: 'T' },
            { text: 'ÂßîÂ©âË°®ËææÔºåËÄÉËôëÂØπÊñπÊÑüÂèó', value: 'F' }
        ]
    },
    {
        id: 15,
        dimension: 'TF',
        type: 'scenario',
        title: 'ÈÅìÂæ∑Âõ∞Â¢É',
        description: 'Èù¢ÂØπÈÅìÂæ∑Âõ∞Â¢ÉÊó∂Ôºå‰Ω†È¶ñÂÖàËÄÉËôëÔºü',
        illustration: 'ü§î',
        options: [
            { text: 'ÂéüÂàôÂíåËßÑÂàôÁöÑÂÖ¨Ê≠£ÊÄß', value: 'T' },
            { text: 'ÂØπÁõ∏ÂÖ≥‰∫∫ÂëòÁöÑÊÉÖÊÑüÂΩ±Âìç', value: 'F' }
        ]
    },
    
    // J/P Áª¥Â∫¶È¢òÁõÆ (16-20)
    {
        id: 16,
        dimension: 'JP',
        type: 'scenario',
        title: 'Â∑•‰ΩúÈ£éÊ†º',
        description: 'Â§ÑÁêÜ‰ªªÂä°Êó∂Ôºå‰Ω†Êõ¥ÂñúÊ¨¢Ôºü',
        illustration: 'üìÖ',
        options: [
            { text: 'Âà∂ÂÆöËØ¶ÁªÜËÆ°ÂàíÔºåÊåâÈÉ®Â∞±Áè≠ÂÆåÊàê', value: 'J' },
            { text: '‰øùÊåÅÁÅµÊ¥ªÊÄßÔºåÊ†πÊçÆÊÉÖÂÜµË∞ÉÊï¥', value: 'P' }
        ]
    },
    {
        id: 17,
        dimension: 'JP',
        type: 'scenario',
        title: 'ÁîüÊ¥ªÁéØÂ¢É',
        description: '‰Ω†ÁöÑÁêÜÊÉ≥ÁîüÊ¥ªÁéØÂ¢ÉÊòØÔºü',
        illustration: 'üè†',
        options: [
            { text: 'Êï¥Ê¥ÅÊúâÂ∫èÔºå‰∏ÄÂàá‰∫ï‰∫ïÊúâÊù°', value: 'J' },
            { text: 'ËàíÈÄÇÈöèÊÄßÔºåÂÖÅËÆ∏‰∏Ä‰∫õÊ∑∑‰π±', value: 'P' }
        ]
    },
    {
        id: 18,
        dimension: 'JP',
        type: 'scenario',
        title: 'Èù¢ÂØπÊà™Ê≠¢Êó•Êúü',
        description: '‰∏¥ËøëÊà™Ê≠¢Êó•ÊúüÊó∂Ôºå‰Ω†ÈÄöÂ∏∏‰ºöÔºü',
        illustration: '‚è∞',
        options: [
            { text: 'ÊèêÂâçÂÆåÊàêÔºåÁïôÂá∫ÁºìÂÜ≤Êó∂Èó¥', value: 'J' },
            { text: 'Âú®ÂéãÂäõ‰∏ãÈ´òÊïàÂ∑•‰ΩúÔºåÊúÄÂêé‰∏ÄÂàªÂÆåÊàê', value: 'P' }
        ]
    },
    {
        id: 19,
        dimension: 'JP',
        type: 'scenario',
        title: 'Ë¥≠Áâ©‰π†ÊÉØ',
        description: 'Ë¥≠Áâ©Êó∂Ôºå‰Ω†ÂÄæÂêë‰∫éÔºü',
        illustration: 'üõçÔ∏è',
        options: [
            { text: 'ÂàóÂ•ΩÊ∏ÖÂçïÔºåÊåâËÆ°ÂàíË¥≠‰π∞', value: 'J' },
            { text: 'ÈöèÊÑèÊµèËßàÔºåÂèëÁé∞ÊÉäÂñú', value: 'P' }
        ]
    },
    {
        id: 20,
        dimension: 'JP',
        type: 'scenario',
        title: 'ÊóÖË°åËÆ°Âàí',
        description: 'Âà∂ÂÆöÊóÖË°åËÆ°ÂàíÊó∂Ôºå‰Ω†ÂñúÊ¨¢Ôºü',
        illustration: 'üó∫Ô∏è',
        options: [
            { text: 'ËØ¶ÁªÜËßÑÂàíÊØè‰∏™ÁªÜËäÇ', value: 'J' },
            { text: 'Âè™ÂÆöÂ§ßÊ¶ÇÊñπÂêëÔºåÈöèÊÄßËÄåË°å', value: 'P' }
        ]
    }
];

// ========== Â∑•ÂÖ∑ÂáΩÊï∞Â∫ì ==========
const Utils = {
    // Âª∂ËøüÂáΩÊï∞
    delay: (ms) => new Promise(resolve => setTimeout(resolve, ms)),
    
    // ËäÇÊµÅÂáΩÊï∞
    throttle: (func, limit) => {
        let inThrottle;
        return function() {
            const args = arguments;
            const context = this;
            if (!inThrottle) {
                func.apply(context, args);
                inThrottle = true;
                setTimeout(() => inThrottle = false, limit);
            }
        };
    },
    
    // Èò≤ÊäñÂáΩÊï∞
    debounce: (func, delay) => {
        let timeoutId;
        return function() {
            const args = arguments;
            const context = this;
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => func.apply(context, args), delay);
        };
    },
    
    // Âπ≥ÊªëÊªöÂä®
    smoothScrollTo: (element, offset = 0) => {
        const targetPosition = element.offsetTop - offset;
        window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
        });
    },
    
    // Ê£ÄÊü•ÂÖÉÁ¥†ÊòØÂê¶Âú®ËßÜÂè£
    isInViewport: (element) => {
        const rect = element.getBoundingClientRect();
        return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
    },
    
    // ÂàõÂª∫Ê∂üÊº™ÊïàÊûú
    createRipple: (element, event) => {
        const ripple = document.createElement('span');
        const rect = element.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = event.clientX - rect.left - size / 2;
        const y = event.clientY - rect.top - size / 2;
        
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = x + 'px';
        ripple.style.top = y + 'px';
        ripple.classList.add('ripple');
        
        element.appendChild(ripple);
        
        setTimeout(() => {
            if (ripple.parentNode) {
                ripple.remove();
            }
        }, 600);
    },
    
    // ÁîüÊàêÈöèÊú∫ID
    generateId: () => '_' + Math.random().toString(36).substr(2, 9),
    
    // Ê†ºÂºèÂåñÊó•Êúü
    formatDate: (date) => {
        return new Date(date).toLocaleString('zh-CN', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
        });
    },
    
    // Ëé∑ÂèñËÆæÂ§áÁ±ªÂûã
    getDeviceType: () => {
        const width = window.innerWidth;
        if (width < APP_CONFIG.UI.BREAKPOINTS.MOBILE) return 'mobile';
        if (width < APP_CONFIG.UI.BREAKPOINTS.TABLET) return 'tablet';
        return 'desktop';
    }
};

// ========== Êú¨Âú∞Â≠òÂÇ®ÁÆ°ÁêÜ ==========
const StorageManager = {
    // Ëé∑ÂèñÊï∞ÊçÆ
    get: (key, defaultValue = null) => {
        try {
            const item = localStorage.getItem(key);
            return item ? JSON.parse(item) : defaultValue;
        } catch (e) {
            console.error(`Storage get error for key ${key}:`, e);
            return defaultValue;
        }
    },
    
    // ËÆæÁΩÆÊï∞ÊçÆ
    set: (key, value) => {
        try {
            localStorage.setItem(key, JSON.stringify(value));
            return true;
        } catch (e) {
            console.error(`Storage set error for key ${key}:`, e);
            return false;
        }
    },
    
    // Âà†Èô§Êï∞ÊçÆ
    remove: (key) => {
        try {
            localStorage.removeItem(key);
            return true;
        } catch (e) {
            console.error(`Storage remove error for key ${key}:`, e);
            return false;
        }
    },
    
    // Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ
    clear: () => {
        try {
            localStorage.clear();
            return true;
        } catch (e) {
            console.error('Storage clear error:', e);
            return false;
        }
    },
    
    // Ëé∑ÂèñÂ≠òÂÇ®Â§ßÂ∞è
    getStorageSize: () => {
        let total = 0;
        for (let key in localStorage) {
            if (localStorage.hasOwnProperty(key)) {
                total += localStorage[key].length + key.length;
            }
        }
        return total;
    }
};

// ========== UIÁÆ°ÁêÜÂô® ==========
class UIManager {
    constructor() {
        this.elements = this.initializeElements();
        this.toastContainer = this.createToastContainer();
    }
    
    // ÂàùÂßãÂåñDOMÂÖÉÁ¥†ÂºïÁî®
    initializeElements() {
        return {
            // ÂØºËà™Áõ∏ÂÖ≥
            navbar: document.getElementById('navbar'),
            navMenu: document.getElementById('navMenu'),
            menuToggle: document.getElementById('menuToggle'),
            navLinks: document.querySelectorAll('.nav-link'),
            
            // È°µÈù¢ÂÆπÂô®
            loadingScreen: document.getElementById('loadingScreen'),
            mainContent: document.querySelector('.main-content'),
            
            // È¶ñÈ°µÂÖÉÁ¥†
            startJourney: document.getElementById('startJourney'),
            quickPreview: document.getElementById('quickPreview'),
            personalityGrid: document.getElementById('personalityGrid'),
            filterBtns: document.querySelectorAll('.filter-btn'),
            
            // ÊµãËØïÈ°µÈù¢
            testPage: document.getElementById('testPage'),
            progressFill: document.getElementById('progressFill'),
            currentQuestion: document.getElementById('currentQuestion'),
            totalQuestions: document.getElementById('totalQuestions'),
            sceneIllustration: document.getElementById('sceneIllustration'),
            questionTitle: document.getElementById('questionTitle'),
            questionType: document.getElementById('questionType'),
            questionDescription: document.getElementById('questionDescription'),
            answerContainer: document.getElementById('answerContainer'),
            prevBtn: document.getElementById('prevBtn'),
            nextBtn: document.getElementById('nextBtn'),
            pauseBtn: document.getElementById('pauseBtn'),
            indicatorDots: document.getElementById('indicatorDots'),
            
            // ÁªìÊûúÈ°µÈù¢
            resultPage: document.getElementById('resultPage'),
            characterReveal: document.querySelector('.character-reveal'),
            characterAvatar: document.getElementById('characterAvatar'),
            characterName: document.getElementById('characterName'),
            characterType: document.getElementById('characterType'),
            characterQuote: document.getElementById('characterQuote'),
            typeDescription: document.getElementById('typeDescription'),
            traitCloud: document.getElementById('traitCloud'),
            strengthsGrid: document.getElementById('strengthsGrid'),
            challengesList: document.getElementById('challengesList'),
            careerMatrix: document.getElementById('careerMatrix'),
            relationshipMap: document.getElementById('relationshipMap'),
            growthPath: document.getElementById('growthPath'),
            shareResult: document.getElementById('shareResult'),
            downloadReport: document.getElementById('downloadReport'),
            restartTest: document.getElementById('restartTest'),
            
            // Ê†áÁ≠æÈ°µ
            tabBtns: document.querySelectorAll('.tab-btn'),
            tabPanes: document.querySelectorAll('.tab-pane'),
            
            // Ê®°ÊÄÅÊ°Ü
            personalityModal: document.getElementById('personalityModal'),
            modalClose: document.getElementById('modalClose'),
            pauseModal: document.getElementById('pauseModal'),
            resumeTest: document.getElementById('resumeTest'),
            exitTest: document.getElementById('exitTest')
        };
    }
    
    // ÂàõÂª∫ToastÂÆπÂô®
    createToastContainer() {
        let container = document.querySelector('.toast-container');
        if (!container) {
            container = document.createElement('div');
            container.className = 'toast-container';
            document.body.appendChild(container);
        }
        return container;
    }
    
    // ÊòæÁ§∫ToastÊ∂àÊÅØ
    showToast(message, type = 'info', duration = APP_CONFIG.UI.TOAST_DURATION) {
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.innerHTML = `
            <div class="toast-content">
                <i class="fas fa-${this.getToastIcon(type)}"></i>
                <span>${message}</span>
                <button class="toast-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
        
        // Ê∑ªÂä†ÂÖ≥Èó≠‰∫ã‰ª∂
        const closeBtn = toast.querySelector('.toast-close');
        closeBtn.addEventListener('click', () => this.removeToast(toast));
        
        // Ê∑ªÂä†Âà∞ÂÆπÂô®
        this.toastContainer.appendChild(toast);
        
        // Ëá™Âä®ÁßªÈô§
        setTimeout(() => this.removeToast(toast), duration);
        
        // Ê∑ªÂä†ËøõÂÖ•Âä®Áîª
        requestAnimationFrame(() => {
            toast.classList.add('show');
        });
    }
    
    // ÁßªÈô§Toast
    removeToast(toast) {
        if (toast && toast.parentNode) {
            toast.classList.add('hide');
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 300);
        }
    }
    
    // Ëé∑ÂèñToastÂõæÊ†á
    getToastIcon(type) {
        const icons = {
            success: 'check-circle',
            error: 'times-circle',
            warning: 'exclamation-triangle',
            info: 'info-circle'
        };
        return icons[type] || 'info-circle';
    }
    
    // ÊòæÁ§∫Âä†ËΩΩÂ±èÂπï
    showLoadingScreen() {
        if (this.elements.loadingScreen) {
            this.elements.loadingScreen.classList.remove('hidden');
        }
    }
    
    // ÈöêËóèÂä†ËΩΩÂ±èÂπï
    hideLoadingScreen() {
        if (this.elements.loadingScreen) {
            this.elements.loadingScreen.classList.add('hidden');
        }
    }
    
    // ÂàáÊç¢È°µÈù¢ÊòæÁ§∫
    showPage(pageName) {
        // ÈöêËóèÊâÄÊúâÈ°µÈù¢
        const pages = ['mainContent', 'testPage', 'resultPage'];
        pages.forEach(page => {
            const element = this.elements[page];
            if (element) {
                element.classList.add('hidden');
            }
        });
        
        // ÊòæÁ§∫ÁõÆÊ†áÈ°µÈù¢
        const targetElement = this.elements[pageName];
        if (targetElement) {
            targetElement.classList.remove('hidden');
        }
    }
    
    // Êõ¥Êñ∞ÂØºËà™Ê†èÊ†∑Âºè
    updateNavbar(scrolled) {
        if (this.elements.navbar) {
            if (scrolled) {
                this.elements.navbar.style.background = 'rgba(255, 255, 255, 0.98)';
                this.elements.navbar.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
            } else {
                this.elements.navbar.style.background = 'rgba(255, 255, 255, 0.95)';
                this.elements.navbar.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
            }
        }
    }
    
    // ÂàáÊç¢ÁßªÂä®Á´ØËèúÂçï
    toggleMobileMenu() {
        if (!this.elements.navMenu || !this.elements.menuToggle) return;
        
        this.elements.navMenu.classList.toggle('active');
        
        const spans = this.elements.menuToggle.querySelectorAll('span');
        if (this.elements.navMenu.classList.contains('active')) {
            spans[0].style.transform = 'rotate(45deg) translateY(8px)';
            spans[1].style.opacity = '0';
            spans[2].style.transform = 'rotate(-45deg) translateY(-8px)';
        } else {
            spans[0].style.transform = 'none';
            spans[1].style.opacity = '1';
            spans[2].style.transform = 'none';
        }
    }
    
    // Êõ¥Êñ∞Ê¥ªÂä®ÂØºËà™ÈìæÊé•
    updateActiveNavLink(sectionId) {
        this.elements.navLinks.forEach(link => {
            link.classList.toggle('active', link.dataset.section === sectionId);
        });
    }
}

// ========== ÊµãËØïÁÆ°ÁêÜÂô® ==========
class TestManager {
    constructor(uiManager, appState) {
        this.ui = uiManager;
        this.state = appState;
        this.questions = QUESTION_DATABASE;
        this.currentFilter = 'all';
    }
    
    // ÂàùÂßãÂåñÊµãËØïÁ≥ªÁªü
    initialize() {
        this.bindEvents();
        this.initializeIndicatorDots();
        this.updateTotalQuestions();
    }
    
    // ÁªëÂÆö‰∫ã‰ª∂
    bindEvents() {
        // ÂºÄÂßãÊµãËØï
        if (this.ui.elements.startJourney) {
            this.ui.elements.startJourney.addEventListener('click', () => this.startTest());
        }
        
        // ÂØºËà™ÊåâÈíÆ
        if (this.ui.elements.prevBtn) {
            this.ui.elements.prevBtn.addEventListener('click', () => this.goToPreviousQuestion());
        }
        if (this.ui.elements.nextBtn) {
            this.ui.elements.nextBtn.addEventListener('click', () => this.goToNextQuestion());
        }
        
        // ÊöÇÂÅúÊåâÈíÆ
        if (this.ui.elements.pauseBtn) {
            this.ui.elements.pauseBtn.addEventListener('click', () => this.pauseTest());
        }
        
        // ÊÅ¢Â§çÂíåÈÄÄÂá∫ÊµãËØï
        if (this.ui.elements.resumeTest) {
            this.ui.elements.resumeTest.addEventListener('click', () => this.resumeTest());
        }
        if (this.ui.elements.exitTest) {
            this.ui.elements.exitTest.addEventListener('click', () => this.exitTest());
        }
        
        // ÈîÆÁõòÂø´Êç∑ÈîÆ
        document.addEventListener('keydown', (e) => this.handleKeyboard(e));
    }
    
    // ÂºÄÂßãÊµãËØï
    startTest() {
        this.state.reset();
        this.state.testStarted = true;
        this.state.answers = new Array(this.questions.length).fill(null);
        
        // ËÆæÁΩÆËá™Âä®‰øùÂ≠ò
        this.state.setAutoSave(() => this.saveProgress());
        
        // ÂàáÊç¢Âà∞ÊµãËØïÈ°µÈù¢
        this.ui.showPage('testPage');
        
        // Âä†ËΩΩÁ¨¨‰∏ÄÈ¢ò
        this.loadQuestion(0);
        
        // ÊªöÂä®Âà∞È°∂ÈÉ®
        window.scrollTo(0, 0);
        
        this.ui.showToast('ÊµãËØïÂºÄÂßãÔºÅËØ∑Ê†πÊçÆ‰Ω†ÁöÑÁúüÂÆûÊÑüÂèóÈÄâÊã©Á≠îÊ°à', 'info');
    }
    
    // Âä†ËΩΩÈóÆÈ¢ò
    loadQuestion(index) {
        if (index < 0 || index >= this.questions.length) return;
        
        const question = this.questions[index];
        
        // Êõ¥Êñ∞ËøõÂ∫¶
        this.updateProgress();
        
        // Êõ¥Êñ∞ÈóÆÈ¢òÂÜÖÂÆπ
        this.updateQuestionContent(question);
        
        // ÁîüÊàêÁ≠îÊ°àÈÄâÈ°π
        this.generateAnswerOptions(question, index);
        
        // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆ
        this.updateNavigationButtons();
        
        // Êõ¥Êñ∞ÊåáÁ§∫ÁÇπ
        this.updateIndicatorDots();
        
        // Ê∑ªÂä†Âä®Áîª
        this.animateQuestionEntry();
    }
    
    // Êõ¥Êñ∞ÈóÆÈ¢òÂÜÖÂÆπ
    updateQuestionContent(question) {
        if (this.ui.elements.sceneIllustration) {
            this.ui.elements.sceneIllustration.textContent = question.illustration;
        }
        if (this.ui.elements.questionTitle) {
            this.ui.elements.questionTitle.textContent = question.title;
        }
        if (this.ui.elements.questionType) {
            this.ui.elements.questionType.textContent = this.getQuestionTypeLabel(question.type);
        }
        if (this.ui.elements.questionDescription) {
            this.ui.elements.questionDescription.textContent = question.description;
        }
    }
    
    // Ëé∑ÂèñÈóÆÈ¢òÁ±ªÂûãÊ†áÁ≠æ
    getQuestionTypeLabel(type) {
        const labels = {
            scenario: 'ÊÉÖÊôØÈÄâÊã©',
            slider: 'Á®ãÂ∫¶ÈÄâÊã©',
            ranking: 'ÊéíÂ∫èÈ¢ò',
            wordcloud: 'ËØç‰∫ëÈÄâÊã©'
        };
        return labels[type] || 'ÈÄâÊã©È¢ò';
    }
    
    // ÁîüÊàêÁ≠îÊ°àÈÄâÈ°π
    generateAnswerOptions(question, questionIndex) {
        if (!this.ui.elements.answerContainer) return;
        
        this.ui.elements.answerContainer.innerHTML = '';
        
        question.options.forEach((option, optionIndex) => {
            const optionElement = document.createElement('div');
            optionElement.className = 'answer-option ripple';
            
            optionElement.innerHTML = `
                <div class="option-indicator"></div>
                <div class="option-text">${option.text}</div>
            `;
            
            // Â¶ÇÊûúÂ∑≤ÈÄâÊã©ÔºåÊ†áËÆ∞Áä∂ÊÄÅ
            if (this.state.answers[questionIndex] === optionIndex) {
                optionElement.classList.add('selected');
            }
            
            // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
            optionElement.addEventListener('click', (e) => {
                this.selectOption(questionIndex, optionIndex);
                Utils.createRipple(optionElement, e);
            });
            
            this.ui.elements.answerContainer.appendChild(optionElement);
        });
    }
    
    // ÈÄâÊã©ÈÄâÈ°π
    selectOption(questionIndex, optionIndex) {
        // ËÆ∞ÂΩïÁ≠îÊ°à
        this.state.answers[questionIndex] = optionIndex;
        
        // Êõ¥Êñ∞ÂàÜÊï∞
        const question = this.questions[questionIndex];
        const selectedOption = question.options[optionIndex];
        this.state.scores[selectedOption.value]++;
        
        // Êõ¥Êñ∞UI
        const options = this.ui.elements.answerContainer.querySelectorAll('.answer-option');
        options.forEach((option, index) => {
            option.classList.toggle('selected', index === optionIndex);
        });
        
        // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆ
        this.updateNavigationButtons();
        
        // ‰øùÂ≠òËøõÂ∫¶
        this.saveProgress();
        
        // Ê∑ªÂä†ÈÄâÊã©Âä®Áîª
        if (options[optionIndex]) {
            this.animateOptionSelection(options[optionIndex]);
        }
    }
    
    // Êõ¥Êñ∞ËøõÂ∫¶
    updateProgress() {
        const progress = ((this.state.currentQuestion + 1) / this.questions.length) * 100;
        
        if (this.ui.elements.progressFill) {
            this.ui.elements.progressFill.style.width = `${progress}%`;
        }
        if (this.ui.elements.currentQuestion) {
            this.ui.elements.currentQuestion.textContent = this.state.currentQuestion + 1;
        }
        
        // Êõ¥Êñ∞Á¢éÁâáÊî∂ÈõÜÂô®
        this.updateFragmentCollector();
    }
    
    // Êõ¥Êñ∞Á¢éÁâáÊî∂ÈõÜÂô®
    updateFragmentCollector() {
        const dimensions = ['EI', 'SN', 'TF', 'JP'];
        const questionsPerDimension = APP_CONFIG.TEST.QUESTIONS_PER_DIMENSION;
        
        dimensions.forEach((dimension) => {
            const start = dimensions.indexOf(dimension) * questionsPerDimension;
            const end = start + questionsPerDimension;
            const answered = this.state.answers.slice(start, end).filter(a => a !== null).length;
            
            const fragmentSlot = document.querySelector(`.fragment-slot[data-fragment="${dimension}"]`);
            if (fragmentSlot) {
                if (answered === questionsPerDimension) {
                    fragmentSlot.classList.add('collected');
                } else {
                    fragmentSlot.classList.remove('collected');
                }
            }
        });
    }
    
    // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆ
    updateNavigationButtons() {
        if (this.ui.elements.prevBtn) {
            this.ui.elements.prevBtn.disabled = this.state.currentQuestion === 0;
        }
        
        const hasAnswer = this.state.answers[this.state.currentQuestion] !== null;
        if (this.ui.elements.nextBtn) {
            this.ui.elements.nextBtn.disabled = !hasAnswer;
            
            if (this.state.currentQuestion === this.questions.length - 1) {
                this.ui.elements.nextBtn.innerHTML = '<span>Êü•ÁúãÁªìÊûú</span><i class="fas fa-check"></i>';
            } else {
                this.ui.elements.nextBtn.innerHTML = '<span>‰∏ã‰∏ÄÈ¢ò</span><i class="fas fa-chevron-right"></i>';
            }
        }
    }
    
    // ÂàùÂßãÂåñÊåáÁ§∫ÁÇπ
    initializeIndicatorDots() {
        if (!this.ui.elements.indicatorDots) return;
        
        this.ui.elements.indicatorDots.innerHTML = '';
        
        this.questions.forEach((_, index) => {
            const dot = document.createElement('div');
            dot.className = 'indicator-dot';
            dot.dataset.index = index;
            
            dot.addEventListener('click', () => {
                if (this.state.answers[index] !== null) {
                    this.state.currentQuestion = index;
                    this.loadQuestion(index);
                }
            });
            
            this.ui.elements.indicatorDots.appendChild(dot);
        });
    }
    
    // Êõ¥Êñ∞ÊåáÁ§∫ÁÇπ
    updateIndicatorDots() {
        if (!this.ui.elements.indicatorDots) return;
        
        const dots = this.ui.elements.indicatorDots.querySelectorAll('.indicator-dot');
        
        dots.forEach((dot, index) => {
            dot.classList.remove('active', 'completed');
            
            if (index === this.state.currentQuestion) {
                dot.classList.add('active');
            } else if (this.state.answers[index] !== null) {
                dot.classList.add('completed');
            }
        });
    }
    
    // Êõ¥Êñ∞ÊÄªÈ¢òÊï∞
    updateTotalQuestions() {
        if (this.ui.elements.totalQuestions) {
            this.ui.elements.totalQuestions.textContent = this.questions.length;
        }
    }
    
    // ÂâçÂæÄ‰∏ä‰∏ÄÈ¢ò
    goToPreviousQuestion() {
        if (this.state.currentQuestion > 0) {
            this.state.currentQuestion--;
            this.loadQuestion(this.state.currentQuestion);
        }
    }
    
    // ÂâçÂæÄ‰∏ã‰∏ÄÈ¢ò
    goToNextQuestion() {
        if (this.state.answers[this.state.currentQuestion] === null) return;
        
        if (this.state.currentQuestion < this.questions.length - 1) {
            this.state.currentQuestion++;
            this.loadQuestion(this.state.currentQuestion);
        } else {
            this.completeTest();
        }
    }
    
    // ÊöÇÂÅúÊµãËØï
    pauseTest() {
        if (this.ui.elements.pauseModal) {
            this.ui.elements.pauseModal.classList.add('active');
        }
    }
    
    // ÊÅ¢Â§çÊµãËØï
    resumeTest() {
        if (this.ui.elements.pauseModal) {
            this.ui.elements.pauseModal.classList.remove('active');
        }
    }
    
    // ÈÄÄÂá∫ÊµãËØï
    exitTest() {
        if (confirm('Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÊµãËØïÂêóÔºüËøõÂ∫¶Â∞ÜË¢´‰øùÂ≠ò„ÄÇ')) {
            this.saveProgress();
            
            this.ui.showPage('mainContent');
            this.state.testStarted = false;
            this.state.clearAutoSave();
            
            if (this.ui.elements.pauseModal) {
                this.ui.elements.pauseModal.classList.remove('active');
            }
            
            this.ui.showToast('ÊµãËØïÂ∑≤ÊöÇÂÅúÔºåËøõÂ∫¶Â∑≤‰øùÂ≠ò', 'info');
        }
    }
    
    // ÂÆåÊàêÊµãËØï
    completeTest() {
        this.state.testCompleted = true;
        this.state.clearAutoSave();
        
        // ËÆ°ÁÆó‰∫∫Ê†ºÁ±ªÂûã
        this.calculatePersonalityType();
        
        // ‰øùÂ≠òÁªìÊûú
        this.saveResults();
        
        // ÊòæÁ§∫ÁªìÊûú
        this.showResults();
        
        // Ê∏ÖÈô§ËøõÂ∫¶
        StorageManager.remove(APP_CONFIG.STORAGE.PROGRESS);
        
        this.ui.showToast('ÊµãËØïÂÆåÊàêÔºÅÊ≠£Âú®ÁîüÊàê‰Ω†ÁöÑ‰∏ìÂ±ûÊä•Âëä...', 'success');
    }
    
    // ËÆ°ÁÆó‰∫∫Ê†ºÁ±ªÂûã
    calculatePersonalityType() {
        const dimensions = ['EI', 'SN', 'TF', 'JP'];
        let type = '';
        
        dimensions.forEach(dimension => {
            const [first, second] = dimension.split('');
            if (this.state.scores[first] >= this.state.scores[second]) {
                type += first;
            } else {
                type += second;
            }
        });
        
        this.state.personalityType = type;
    }
    
    // ‰øùÂ≠òËøõÂ∫¶
    saveProgress() {
        const progressData = {
            currentQuestion: this.state.currentQuestion,
            answers: this.state.answers,
            scores: this.state.scores,
            timestamp: Date.now()
        };
        
        StorageManager.set(APP_CONFIG.STORAGE.PROGRESS, progressData);
    }
    
    // ‰øùÂ≠òÁªìÊûú
    saveResults() {
        const resultData = {
            personalityType: this.state.personalityType,
            scores: this.state.scores,
            timestamp: Date.now()
        };
        
        StorageManager.set(APP_CONFIG.STORAGE.RESULTS, resultData);
        
        // Ê∑ªÂä†Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
        this.addToHistory(resultData);
    }
    
    // Ê∑ªÂä†Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
    addToHistory(result) {
        const history = StorageManager.get(APP_CONFIG.STORAGE.HISTORY, []);
        history.unshift(result);
        
        // ‰øùÁïôÊúÄËøë10Ê¨°ËÆ∞ÂΩï
        if (history.length > 10) {
            history.pop();
        }
        
        StorageManager.set(APP_CONFIG.STORAGE.HISTORY, history);
    }
    
    // Ê£ÄÊü•‰øùÂ≠òÁöÑËøõÂ∫¶
    checkSavedProgress() {
        const savedProgress = StorageManager.get(APP_CONFIG.STORAGE.PROGRESS);
        
        if (savedProgress) {
            const now = Date.now();
            if (now - savedProgress.timestamp < APP_CONFIG.TEST.PROGRESS_EXPIRY) {
                if (confirm('Ê£ÄÊµãÂà∞Êú™ÂÆåÊàêÁöÑÊµãËØïÔºåÊòØÂê¶ÊÅ¢Â§ç‰∏äÊ¨°ËøõÂ∫¶Ôºü')) {
                    this.state.currentQuestion = savedProgress.currentQuestion;
                    this.state.answers = savedProgress.answers || [];
                    this.state.scores = savedProgress.scores || {
                        E: 0, I: 0,
                        S: 0, N: 0,
                        T: 0, F: 0,
                        J: 0, P: 0
                    };
                    this.startTest();
                }
            } else {
                StorageManager.remove(APP_CONFIG.STORAGE.PROGRESS);
            }
        }
    }
    
    // Â§ÑÁêÜÈîÆÁõò‰∫ã‰ª∂
    handleKeyboard(e) {
        if (!this.state.testStarted || this.state.testCompleted) return;
        
        switch(e.key) {
            case 'ArrowLeft':
                if (this.ui.elements.prevBtn && !this.ui.elements.prevBtn.disabled) {
                    this.goToPreviousQuestion();
                }
                break;
            case 'ArrowRight':
                if (this.ui.elements.nextBtn && !this.ui.elements.nextBtn.disabled) {
                    this.goToNextQuestion();
                }
                break;
            case ' ':
                e.preventDefault();
                if (this.ui.elements.pauseBtn) {
                    this.pauseTest();
                }
                break;
        }
    }
    
    // Âä®ÁîªÊïàÊûú
    animateQuestionEntry() {
        if (!this.ui.elements.answerContainer) return;
        
        const container = this.ui.elements.answerContainer.parentElement;
        container.style.opacity = '0';
        container.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            container.style.transition = 'all 0.5s ease-out';
            container.style.opacity = '1';
            container.style.transform = 'translateY(0)';
        }, 100);
    }
    
    animateOptionSelection(optionElement) {
        optionElement.style.transform = 'scale(0.95)';
        setTimeout(() => {
            optionElement.style.transform = 'scale(1)';
        }, 200);
    }
    
    // ÊòæÁ§∫ÁªìÊûúÔºàÁî±ResultManagerÂ§ÑÁêÜÔºâ
    showResults() {
        // Ëøô‰∏™ÊñπÊ≥ïÂ∞ÜÁî±ResultManagerÂÆûÁé∞
        if (window.personaQuest && window.personaQuest.resultManager) {
            window.personaQuest.resultManager.showResults();
        }
    }
}

// ========== ÁªìÊûúÁÆ°ÁêÜÂô® ==========
class ResultManager {
    constructor(uiManager, appState) {
        this.ui = uiManager;
        this.state = appState;
        this.personalities = getAllPersonalities();
    }
    
    // ÂàùÂßãÂåñ
    initialize() {
        this.bindEvents();
    }
    
    // ÁªëÂÆö‰∫ã‰ª∂
    bindEvents() {
        // ÂàÜ‰∫´ÁªìÊûú
        if (this.ui.elements.shareResult) {
            this.ui.elements.shareResult.addEventListener('click', () => this.shareResults());
        }
        
        // ‰∏ãËΩΩÊä•Âëä
        if (this.ui.elements.downloadReport) {
            this.ui.elements.downloadReport.addEventListener('click', () => this.downloadReport());
        }
        
        // ÈáçÊñ∞ÊµãËØï
        if (this.ui.elements.restartTest) {
            this.ui.elements.restartTest.addEventListener('click', () => this.restartTest());
        }
        
        // Ê†áÁ≠æÈ°µÂàáÊç¢
        this.ui.elements.tabBtns.forEach(btn => {
            btn.addEventListener('click', () => this.switchTab(btn.dataset.tab));
        });
    }
    
    // ÊòæÁ§∫ÁªìÊûú
    showResults() {
        // ÂàáÊç¢Âà∞ÁªìÊûúÈ°µÈù¢
        this.ui.showPage('resultPage');
        
        // Ëé∑Âèñ‰∫∫Ê†ºÊï∞ÊçÆ
        const personality = this.personalities.find(p => p.type === this.state.personalityType);
        
        if (!personality) {
            this.ui.showToast('ÁªìÊûúÁîüÊàêÂ§±Ë¥•ÔºåËØ∑ÈáçËØï', 'error');
            return;
        }
        
        // Ê∏≤ÊüìÁªìÊûú
        this.renderCharacterReveal(personality);
        this.renderDimensionsAnalysis();
        this.renderDetailedReport(personality);
        
        // ÊªöÂä®Âà∞È°∂ÈÉ®
        window.scrollTo(0, 0);
    }
    
    // Ê∏≤ÊüìËßíËâ≤Â±ïÁ§∫
    renderCharacterReveal(personality) {
        if (this.ui.elements.characterAvatar) {
            const avatarEmoji = this.ui.elements.characterAvatar.querySelector('.avatar-emoji');
            if (avatarEmoji) {
                avatarEmoji.textContent = personality.emoji;
            }
        }
        if (this.ui.elements.characterName) {
            this.ui.elements.characterName.textContent = personality.name;
        }
        if (this.ui.elements.characterType) {
            this.ui.elements.characterType.textContent = personality.type;
        }
        if (this.ui.elements.characterQuote) {
            this.ui.elements.characterQuote.innerHTML = `<p>"${personality.quote}"</p>`;
        }
        
        // Ê∑ªÂä†Âä®Áîª
        if (this.ui.elements.characterReveal) {
            setTimeout(() => {
                this.ui.elements.characterReveal.style.animation = 'fadeInUp 1s ease-out';
            }, 100);
        }
    }
    
    // Ê∏≤ÊüìÁª¥Â∫¶ÂàÜÊûê
    renderDimensionsAnalysis() {
        const dimensions = [
            { key: 'EI', left: 'E', right: 'I' },
            { key: 'SN', left: 'S', right: 'N' },
            { key: 'TF', left: 'T', right: 'F' },
            { key: 'JP', left: 'J', right: 'P' }
        ];
        
        dimensions.forEach(dimension => {
            const leftScore = this.state.scores[dimension.left];
            const rightScore = this.state.scores[dimension.right];
            const total = leftScore + rightScore;
            const percentage = total > 0 ? (leftScore / total) * 100 : 50;
            
            const barFill = document.querySelector(`.bar-fill[data-dimension="${dimension.key}"]`);
            const barIndicator = barFill ? barFill.nextElementSibling : null;
            
            if (barFill) {
                setTimeout(() => {
                    barFill.style.width = `${percentage}%`;
                }, 500);
            }
            if (barIndicator) {
                setTimeout(() => {
                    barIndicator.style.left = `${percentage}%`;
                }, 500);
            }
        });
    }
    
    // Ê∏≤ÊüìËØ¶ÁªÜÊä•Âëä
    renderDetailedReport(personality) {
        // Á±ªÂûãËß£Êûê
        if (this.ui.elements.typeDescription) {
            this.ui.elements.typeDescription.textContent = personality.description;
        }
        
        // ÁâπË¥®ËØç‰∫ë
        if (this.ui.elements.traitCloud) {
            this.ui.elements.traitCloud.innerHTML = personality.traits.map(trait => 
                `<span class="trait-tag">${trait}</span>`
            ).join('');
        }
        
        // ‰ºòÂäøÁâπÈïø
        if (this.ui.elements.strengthsGrid) {
            this.ui.elements.strengthsGrid.innerHTML = personality.strengths.map(strength => `
                <div class="strength-card">
                    <div class="strength-icon">${strength.icon}</div>
                    <p>${strength.text}</p>
                </div>
            `).join('');
        }
        
        // ÊàêÈïøÊåëÊàò
        if (this.ui.elements.challengesList) {
            this.ui.elements.challengesList.innerHTML = personality.challenges.map(challenge => `
                <div class="challenge-item">
                    <div class="challenge-icon">${challenge.icon}</div>
                    <p>${challenge.text}</p>
                </div>
            `).join('');
        }
        
        // ËÅå‰∏öË∑ØÂæÑ
        if (this.ui.elements.careerMatrix) {
            this.ui.elements.careerMatrix.innerHTML = personality.careers.map(career => `
                <div class="career-item">${career}</div>
            `).join('');
        }
        
        // ÂÖ≥Á≥ªÊåáÂçó
        if (this.ui.elements.relationshipMap) {
            this.ui.elements.relationshipMap.innerHTML = `
                <div class="relationship-card">
                    <h4>ÂÖ≥Á≥ªÊ¶ÇËø∞</h4>
                    <p>${personality.relationships.overview}</p>
                </div>
                <div class="relationship-card">
                    <h4>Âª∫ËÆÆ</h4>
                    <p>${personality.relationships.advice}</p>
                </div>
            `;
        }
        
        // ÊàêÈïø‰ªªÂä°
        if (this.ui.elements.growthPath) {
            this.ui.elements.growthPath.innerHTML = personality.growth.map(step => `
                <div class="growth-step">
                    <div class="step-number">${step.step}</div>
                    <div class="step-content">
                        <h4>${step.title}</h4>
                        <p>${step.desc}</p>
                    </div>
                </div>
            `).join('');
        }
    }
    
    // ÂàáÊç¢Ê†áÁ≠æÈ°µ
    switchTab(tabName) {
        this.ui.elements.tabBtns.forEach(btn => {
            btn.classList.toggle('active', btn.dataset.tab === tabName);
        });
        
        this.ui.elements.tabPanes.forEach(pane => {
            pane.classList.toggle('active', pane.id === tabName);
        });
    }
    
    // ÂàÜ‰∫´ÁªìÊûú
    async shareResults() {
        const personality = this.personalities.find(p => p.type === this.state.personalityType);
        
        const shareText = `ÊàëÂú®PersonaQuestÂèëÁé∞‰∫ÜÊàëÁöÑÁÅµÈ≠ÇËßíËâ≤Ôºö${personality.name} (${personality.type})ÔºÅ\n\n${personality.description}\n\nÂø´Êù•Êé¢Á¥¢‰Ω†ÁöÑÂÜÖÂú®ÂÆáÂÆôÂêßÔºÅ`;
        
        if (navigator.share) {
            try {
                await navigator.share({
                    title: 'PersonaQuest - Êé¢Á¥¢Ëá™ÊàëÁöÑÂÜíÈô©ÊóÖÁ®ã',
                    text: shareText,
                    url: window.location.href
                });
                this.ui.showToast('ÂàÜ‰∫´ÊàêÂäüÔºÅ', 'success');
            } catch (err) {
                if (err.name !== 'AbortError') {
                    this.copyToClipboard(shareText);
                }
            }
        } else {
            this.copyToClipboard(shareText);
        }
    }
    
    // Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø
    copyToClipboard(text) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        
        try {
            document.execCommand('copy');
            this.ui.showToast('ÂàÜ‰∫´ÂÜÖÂÆπÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ', 'success');
        } catch (err) {
            this.ui.showToast('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Â§çÂà∂', 'error');
        }
        
        document.body.removeChild(textArea);
    }
    
    // ‰∏ãËΩΩÊä•Âëä
    downloadReport() {
        const personality = this.personalities.find(p => p.type === this.state.personalityType);
        
        const reportContent = this.generateReportContent(personality);
        
        const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        
        link.href = url;
        link.download = `PersonaQuest-${personality.type}-${personality.name}-Êä•Âëä.txt`;
        link.click();
        
        URL.revokeObjectURL(url);
        
        this.ui.showToast('Êä•Âëä‰∏ãËΩΩÊàêÂäüÔºÅ', 'success');
    }
    
    // ÁîüÊàêÊä•ÂëäÂÜÖÂÆπ
    generateReportContent(personality) {
        return `
PersonaQuest ‰∫∫Ê†ºÂàÜÊûêÊä•Âëä
========================

Âü∫Êú¨‰ø°ÊÅØ
--------
Á±ªÂûãÔºö${personality.type} - ${personality.name}
Êó∂Èó¥Ôºö${Utils.formatDate(Date.now())}

Á±ªÂûãÊèèËø∞
--------
${personality.description}

Ê†∏ÂøÉÁâπË¥®
--------
${personality.traits.map(trait => `‚Ä¢ ${trait}`).join('\n')}

‰ºòÂäøÁâπÈïø
--------
${personality.strengths.map(s => `‚Ä¢ ${s.text}`).join('\n')}

ÊàêÈïøÊåëÊàò
--------
${personality.challenges.map(c => `‚Ä¢ ${c.text}`).join('\n')}

ÈÄÇÂêàËÅå‰∏ö
--------
${personality.careers.map(c => `‚Ä¢ ${c}`).join('\n')}

ÂÖ≥Á≥ªÊåáÂçó
--------
${personality.relationships.advice}

ÊàêÈïø‰ªªÂä°
--------
${personality.growth.map(g => `${g.step}. ${g.title}: ${g.desc}`).join('\n')}

========================
ÊÑüË∞¢‰ΩøÁî® PersonaQuest
Êé¢Á¥¢Ëá™ÊàëÔºåÂèëÁé∞Êó†ÈôêÂèØËÉΩ
    `.trim();
    }
    
    // ÈáçÊñ∞ÂºÄÂßãÊµãËØï
    restartTest() {
        if (confirm('Á°ÆÂÆöË¶ÅÈáçÊñ∞ÂºÄÂßãÊµãËØïÂêóÔºüÂΩìÂâçÁªìÊûúÂ∞ÜË¢´Ê∏ÖÈô§„ÄÇ')) {
            this.state.reset();
            
            this.ui.showPage('mainContent');
            window.scrollTo(0, 0);
            
            this.ui.showToast('ÊµãËØïÂ∑≤ÈáçÁΩÆÔºåÂèØ‰ª•ÈáçÊñ∞ÂºÄÂßã', 'info');
        }
    }
}

// ========== ÁîªÂªäÁÆ°ÁêÜÂô® ==========
class GalleryManager {
    constructor(uiManager) {
        this.ui = uiManager;
        this.personalities = getAllPersonalities();
        this.currentFilter = 'all';
    }
    
    // ÂàùÂßãÂåñ
    initialize() {
        this.bindEvents();
        this.renderGallery();
    }
    
    // ÁªëÂÆö‰∫ã‰ª∂
    bindEvents() {
        // Á≠õÈÄâÊåâÈíÆ
        this.ui.elements.filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const filter = btn.dataset.filter;
                this.setFilter(filter);
            });
        });
        
        // Âø´ÈÄüÈ¢ÑËßà
        if (this.ui.elements.quickPreview) {
            this.ui.elements.quickPreview.addEventListener('click', () => this.showQuickPreview());
        }
    }
    
    // ËÆæÁΩÆÁ≠õÈÄâÂô®
    setFilter(filter) {
        this.currentFilter = filter;
        
        // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
        this.ui.elements.filterBtns.forEach(btn => {
            btn.classList.toggle('active', btn.dataset.filter === filter);
        });
        
        // ÈáçÊñ∞Ê∏≤ÊüìÁîªÂªä
        this.renderGallery();
    }
    
    // Ê∏≤ÊüìÁîªÂªä
    renderGallery() {
        if (!this.ui.elements.personalityGrid) return;
        
        this.ui.elements.personalityGrid.innerHTML = '';
        
        const filteredPersonalities = this.getFilteredPersonalities();
        
        filteredPersonalities.forEach((personality, index) => {
            const card = this.createPersonalityCard(personality, index);
            this.ui.elements.personalityGrid.appendChild(card);
        });
        
        // Ê∑ªÂä†Âä®Áîª
        setTimeout(() => {
            this.ui.elements.personalityGrid.querySelectorAll('.personality-card').forEach((card, index) => {
                setTimeout(() => {
                    card.style.animation = 'fadeInUp 0.5s ease-out';
                }, index * APP_CONFIG.ANIMATION.STAGGER_DELAY);
            });
        }, 100);
    }
    
    // Ëé∑ÂèñÁ≠õÈÄâÂêéÁöÑ‰∫∫Ê†º
    getFilteredPersonalities() {
        if (this.currentFilter === 'all') {
            return this.personalities;
        }
        
        return this.personalities.filter(p => {
            // Ê†πÊçÆÁ±ªÂà´Á≠õÈÄâ
            for (let category in PERSONALITY_DATABASE) {
                if (PERSONALITY_DATABASE[category].includes(p)) {
                    return category === this.currentFilter;
                }
            }
            return false;
        });
    }
    
    // ÂàõÂª∫‰∫∫Ê†ºÂç°Áâá
    createPersonalityCard(personality, index) {
        const card = document.createElement('div');
        card.className = 'personality-card';
        card.style.animationDelay = `${index * 0.1}s`;
        
        card.innerHTML = `
            <div class="personality-avatar">${personality.emoji}</div>
            <h3 class="personality-name">${personality.name}</h3>
            <p class="personality-type">${personality.type}</p>
            <p class="personality-description">${personality.description}</p>
        `;
        
        // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
        card.addEventListener('click', (e) => {
            this.showPersonalityDetail(personality);
            Utils.createRipple(card, e);
        });
        
        return card;
    }
    
    // ÊòæÁ§∫‰∫∫Ê†ºËØ¶ÊÉÖ
    showPersonalityDetail(personality) {
        if (!this.ui.elements.personalityModal) return;
        
        const modalBody = this.ui.elements.personalityModal.querySelector('.modal-body');
        if (!modalBody) return;
        
        modalBody.innerHTML = `
            <div class="modal-avatar">${personality.emoji}</div>
            <h2 class="modal-title">${personality.name}</h2>
            <p class="modal-type">${personality.type}</p>
            <p class="modal-description">${personality.description}</p>
            <div class="modal-traits">
                ${personality.traits.map(trait => 
                    `<span class="modal-trait">${trait}</span>`
                ).join('')}
            </div>
        `;
        
        this.ui.elements.personalityModal.classList.add('active');
    }
    
    // ÊòæÁ§∫Âø´ÈÄüÈ¢ÑËßà
    showQuickPreview() {
        const randomPersonalities = [...this.personalities].sort(() => 0.5 - Math.random()).slice(0, 3);
        const message = `‰ªäÊó•Êé®Ëçê‰∫∫Ê†ºÔºö${randomPersonalities.map(p => p.name).join('„ÄÅ')}„ÄÇÂø´Êù•ÂèëÁé∞Â±û‰∫é‰Ω†ÁöÑÁÅµÈ≠ÇËßíËâ≤ÔºÅ`;
        this.ui.showToast(message, 'info');
        
        // ÊªöÂä®Âà∞ÁîªÂªä
        const gallery = document.getElementById('gallery');
        if (gallery) {
            Utils.smoothScrollTo(gallery, 80);
        }
    }
}

// ========== ÂØºËà™ÁÆ°ÁêÜÂô® ==========
class NavigationManager {
    constructor(uiManager, appState) {
        this.ui = uiManager;
        this.state = appState;
    }
    
    // ÂàùÂßãÂåñ
    initialize() {
        this.bindEvents();
        this.initializeScrollHandling();
    }
    
    // ÁªëÂÆö‰∫ã‰ª∂
    bindEvents() {
        // ÁßªÂä®Á´ØËèúÂçïÂàáÊç¢
        if (this.ui.elements.menuToggle) {
            this.ui.elements.menuToggle.addEventListener('click', () => {
                this.ui.toggleMobileMenu();
            });
        }
        
        // ÂØºËà™ÈìæÊé•ÁÇπÂáª
        this.ui.elements.navLinks.forEach(link => {
            link.addEventListener('click', (e) => this.handleNavLinkClick(e));
        });
    }
    
    // ÂàùÂßãÂåñÊªöÂä®Â§ÑÁêÜ
    initializeScrollHandling() {
        window.addEventListener('scroll', Utils.throttle(() => this.handleScroll(), 100));
    }
    
    // Â§ÑÁêÜÂØºËà™ÈìæÊé•ÁÇπÂáª
    handleNavLinkClick(e) {
        e.preventDefault();
        
        const link = e.currentTarget;
        const sectionId = link.dataset.section;
        
        if (!sectionId) return;
        
        // Êõ¥Êñ∞Ê¥ªÂä®Áä∂ÊÄÅ
        this.ui.updateActiveNavLink(sectionId);
        
        // ÂÖ≥Èó≠ÁßªÂä®Á´ØËèúÂçï
        if (Utils.getDeviceType() === 'mobile' && this.ui.elements.navMenu) {
            this.ui.elements.navMenu.classList.remove('active');
        }
        
        // Â§ÑÁêÜÁâπÊÆäÈìæÊé•
        if (sectionId === 'test') {
            if (window.personaQuest && window.personaQuest.testManager) {
                window.personaQuest.testManager.startTest();
            }
            return;
        }
        
        // ÊªöÂä®Âà∞ÂØπÂ∫îÈÉ®ÂàÜ
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
            Utils.smoothScrollTo(targetSection, 80);
            this.state.currentSection = sectionId;
        }
    }
    
    // Â§ÑÁêÜÊªöÂä®‰∫ã‰ª∂
    handleScroll() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        // Êõ¥Êñ∞ÂØºËà™Ê†èÊ†∑Âºè
        this.ui.updateNavbar(scrollTop > APP_CONFIG.ANIMATION.SCROLL_THRESHOLD);
        
        // Êõ¥Êñ∞ÂΩìÂâçÈÉ®ÂàÜ
        this.updateCurrentSection();
        
        // Ê∑ªÂä†ÊªöÂä®Âä®Áîª
        this.animateOnScroll();
    }
    
    // Êõ¥Êñ∞ÂΩìÂâçÈÉ®ÂàÜ
    updateCurrentSection() {
        const sections = document.querySelectorAll('section[id]');
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        sections.forEach(section => {
            const rect = section.getBoundingClientRect();
            const sectionTop = rect.top + scrollTop;
            const sectionHeight = rect.height;
            
            if (scrollTop >= sectionTop - 200 && scrollTop < sectionTop + sectionHeight - 200) {
                this.state.currentSection = section.id;
                this.ui.updateActiveNavLink(section.id);
            }
        });
    }
    
    // ÊªöÂä®Âä®Áîª
    animateOnScroll() {
        const elements = document.querySelectorAll('.section-title, .personality-card, .feature-card, .timeline-item');
        
        elements.forEach(element => {
            if (Utils.isInViewport(element) && !element.classList.contains('animated')) {
                element.classList.add('animated');
                element.style.animation = 'fadeInUp 0.6s ease-out';
            }
        });
    }
}

// ========== Ê®°ÊÄÅÊ°ÜÁÆ°ÁêÜÂô® ==========
class ModalManager {
    constructor(uiManager) {
        this.ui = uiManager;
        this.activeModal = null;
    }
    
    // ÂàùÂßãÂåñ
    initialize() {
        this.bindEvents();
    }
    
    // ÁªëÂÆö‰∫ã‰ª∂
    bindEvents() {
        // ÂÖ≥Èó≠ÊåâÈíÆ
        if (this.ui.elements.modalClose) {
            this.ui.elements.modalClose.addEventListener('click', () => {
                this.closeModal('personalityModal');
            });
        }
        
        // ËÉåÊôØÁÇπÂáªÂÖ≥Èó≠
        [this.ui.elements.personalityModal, this.ui.elements.pauseModal].forEach(modal => {
            if (modal) {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        this.closeModal(modal.id);
                    }
                });
            }
        });
        
        // ESCÈîÆÂÖ≥Èó≠
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.activeModal) {
                this.closeModal(this.activeModal);
            }
        });
    }
    
    // ÊòæÁ§∫Ê®°ÊÄÅÊ°Ü
    showModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.classList.add('active');
            this.activeModal = modalId;
            document.body.style.overflow = 'hidden';
        }
    }
    
    // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
    closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.classList.remove('active');
            this.activeModal = null;
            document.body.style.overflow = '';
        }
    }
    
    // ÂÖ≥Èó≠ÊâÄÊúâÊ®°ÊÄÅÊ°Ü
    closeAllModals() {
        document.querySelectorAll('.modal.active').forEach(modal => {
            modal.classList.remove('active');
        });
        this.activeModal = null;
        document.body.style.overflow = '';
    }
}

// ========== ‰∏ªÂ∫îÁî®Á±ª ==========
class PersonaQuestApp {
    constructor() {
        this.state = new AppState();
        this.ui = new UIManager();
        this.navigation = new NavigationManager(this.ui, this.state);
        this.gallery = new GalleryManager(this.ui);
        this.test = new TestManager(this.ui, this.state);
        this.result = new ResultManager(this.ui, this.state);
        this.modal = new ModalManager(this.ui);
        
        // Êö¥Èú≤Âà∞ÂÖ®Â±Ä
        window.personaQuest = this;
    }
    
    // ÂàùÂßãÂåñÂ∫îÁî®
    async initialize() {
        try {
            // ÊòæÁ§∫Âä†ËΩΩÂ±èÂπï
            this.ui.showLoadingScreen();
            
            // ÂàùÂßãÂåñÂêÑ‰∏™Ê®°Âùó
            await Promise.all([
                this.navigation.initialize(),
                this.gallery.initialize(),
                this.test.initialize(),
                this.result.initialize(),
                this.modal.initialize()
            ]);
            
            // Âä†ËΩΩËÆæÁΩÆ
            this.loadSettings();
            
            // Ê£ÄÊü•‰øùÂ≠òÁöÑËøõÂ∫¶
            this.test.checkSavedProgress();
            
            // ÈöêËóèÂä†ËΩΩÂ±èÂπï
            await Utils.delay(1500);
            this.ui.hideLoadingScreen();
            
            // ÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØ
            this.ui.showToast('Ê¨¢ËøéÊù•Âà∞PersonaQuestÔºÅÂºÄÂßãÊé¢Á¥¢‰Ω†ÁöÑÂÜÖÂú®ÂÆáÂÆô', 'info');
            
            // Ê∑ªÂä†ÂÖ®Â±ÄÈîôËØØÂ§ÑÁêÜ
            this.setupErrorHandling();
            
        } catch (error) {
            console.error('App initialization error:', error);
            this.ui.showToast('Â∫îÁî®ÂàùÂßãÂåñÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï', 'error');
        }
    }
    
    // Âä†ËΩΩËÆæÁΩÆ
    loadSettings() {
        const settings = StorageManager.get(APP_CONFIG.STORAGE.SETTINGS, {
            soundEnabled: true,
            animationsEnabled: true,
            theme: 'light'
        });
        
        this.state.settings = settings;
    }
    
    // ËÆæÁΩÆÈîôËØØÂ§ÑÁêÜ
    setupErrorHandling() {
        // ÂÖ®Â±ÄÈîôËØØÂ§ÑÁêÜ
        window.addEventListener('error', (e) => {
            console.error('Global error:', e.error);
            this.ui.showToast('ÂèëÁîü‰∫Ü‰∏Ä‰∏™ÈîôËØØÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï', 'error');
        });
        
        // Êú™Â§ÑÁêÜÁöÑPromiseÊãíÁªù
        window.addEventListener('unhandledrejection', (e) => {
            console.error('Unhandled promise rejection:', e.reason);
            this.ui.showToast('ÂèëÁîü‰∫Ü‰∏Ä‰∏™ÈîôËØØÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï', 'error');
        });
        
        // È°µÈù¢Âç∏ËΩΩÂâç‰øùÂ≠ò
        window.addEventListener('beforeunload', (e) => {
            if (this.state.testStarted && !this.state.testCompleted) {
                this.test.saveProgress();
                e.preventDefault();
                e.returnValue = '';
            }
        });
    }
}

// ========== Â∫îÁî®ÂêØÂä® ==========
// DOMÂä†ËΩΩÂÆåÊàêÂêéÂêØÂä®Â∫îÁî®
document.addEventListener('DOMContentLoaded', () => {
    const app = new PersonaQuestApp();
    app.initialize();
});

// ÂØºÂá∫Ê®°ÂùóÔºàÂ¶ÇÊûú‰ΩøÁî®Ê®°ÂùóÁ≥ªÁªüÔºâ
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        PersonaQuestApp,
        AppState,
        UIManager,
        TestManager,
        ResultManager,
        GalleryManager,
        NavigationManager,
        ModalManager,
        PERSONALITY_DATABASE,
        QUESTION_DATABASE
    };
}
